
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>FBOT Developer Docs</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen-a1ce949a.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-bccf8c07.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-c5541673.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;http&quot;,&quot;javascript&quot;,&quot;ruby&quot;,&quot;python&quot;,&quot;php&quot;,&quot;java&quot;,&quot;go&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-daa24e8f.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">Shell</a>
              <a href="#" data-language-name="http">HTTP</a>
              <a href="#" data-language-name="javascript">JavaScript</a>
              <a href="#" data-language-name="ruby">Ruby</a>
              <a href="#" data-language-name="python">Python</a>
              <a href="#" data-language-name="php">PHP</a>
              <a href="#" data-language-name="java">Java</a>
              <a href="#" data-language-name="go">Go</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#integration-setup" class="toc-h1 toc-link" data-title="Integration Setup">Integration Setup</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#merchant-sdk-javascript" class="toc-h2 toc-link" data-title="Merchant SDK Javascript">Merchant SDK Javascript</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#tracking-events" class="toc-h1 toc-link" data-title="Tracking Events">Tracking Events</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#tracking-call-api" class="toc-h2 toc-link" data-title="Tracking Call API">Tracking Call API</a>
                  </li>
                  <li>
                    <a href="#event-rules-by-type" class="toc-h2 toc-link" data-title="Event rules by type">Event rules by type</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#tracking-call-examples" class="toc-h1 toc-link" data-title="Tracking Call Examples">Tracking Call Examples</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#tracking-customer" class="toc-h2 toc-link" data-title="Tracking Customer">Tracking Customer</a>
                  </li>
                  <li>
                    <a href="#tracking-email" class="toc-h2 toc-link" data-title="Tracking email">Tracking email</a>
                  </li>
                  <li>
                    <a href="#tracking-pages" class="toc-h2 toc-link" data-title="Tracking Pages">Tracking Pages</a>
                  </li>
                  <li>
                    <a href="#tracking-purchase" class="toc-h2 toc-link" data-title="Tracking Purchase">Tracking Purchase</a>
                  </li>
                  <li>
                    <a href="#track-signup" class="toc-h2 toc-link" data-title="Track Signup">Track Signup</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#event-subscriptions" class="toc-h1 toc-link" data-title="Event Subscriptions">Event Subscriptions</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#couponreceived" class="toc-h2 toc-link" data-title="couponReceived">couponReceived</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#webhooks" class="toc-h1 toc-link" data-title="Webhooks">Webhooks</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#retry-behavior" class="toc-h2 toc-link" data-title="Retry Behavior">Retry Behavior</a>
                  </li>
                  <li>
                    <a href="#signature-validation" class="toc-h2 toc-link" data-title="Signature Validation">Signature Validation</a>
                  </li>
                  <li>
                    <a href="#reward-webhook" class="toc-h2 toc-link" data-title="Reward Webhook">Reward Webhook</a>
                  </li>
                  <li>
                    <a href="#email-capture-webhook" class="toc-h2 toc-link" data-title="Email Capture Webhook">Email Capture Webhook</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#reward-validation-callback" class="toc-h1 toc-link" data-title="Reward Validation Callback">Reward Validation Callback</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#overview" class="toc-h2 toc-link" data-title="Overview">Overview</a>
                  </li>
                  <li>
                    <a href="#how-it-works" class="toc-h2 toc-link" data-title="How it Works ">How it Works <a id="how-it-works"></a></a>
                  </li>
                  <li>
                    <a href="#retry-behavior" class="toc-h2 toc-link" data-title="Retry Behavior">Retry Behavior</a>
                  </li>
                  <li>
                    <a href="#advocate" class="toc-h2 toc-link" data-title="advocate">advocate</a>
                  </li>
                  <li>
                    <a href="#payload" class="toc-h2 toc-link" data-title="Payload">Payload</a>
                  </li>
                  <li>
                    <a href="#example" class="toc-h2 toc-link" data-title="Example">Example</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#customer-authentication" class="toc-h1 toc-link" data-title="Customer Authentication">Customer Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#summary" class="toc-h2 toc-link" data-title="Summary"><strong>Summary</strong></a>
                  </li>
                  <li>
                    <a href="#instructions" class="toc-h2 toc-link" data-title="Instructions">Instructions</a>
                  </li>
                  <li>
                    <a href="#php-example" class="toc-h2 toc-link" data-title="PHP Example"><strong>PHP Example</strong></a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#merchant-api-guides" class="toc-h1 toc-link" data-title="Merchant API Guides">Merchant API Guides</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#summary" class="toc-h2 toc-link" data-title="Summary">Summary</a>
                  </li>
                  <li>
                    <a href="#base-url" class="toc-h2 toc-link" data-title="Base URL">Base URL</a>
                  </li>
                  <li>
                    <a href="#authorization" class="toc-h2 toc-link" data-title="Authorization">Authorization</a>
                  </li>
                  <li>
                    <a href="#generating-referral-links" class="toc-h2 toc-link" data-title="Generating Referral Links">Generating Referral Links</a>
                  </li>
                  <li>
                    <a href="#tracking-a-purchase" class="toc-h2 toc-link" data-title="Tracking a Purchase">Tracking a Purchase</a>
                  </li>
                  <li>
                    <a href="#tracking-a-signup" class="toc-h2 toc-link" data-title="Tracking a Signup"><strong>Tracking a Signup</strong></a>
                  </li>
                  <li>
                    <a href="#tracking-a-custom-event" class="toc-h2 toc-link" data-title="Tracking a Custom Event"><strong>Tracking a Custom Event</strong></a>
                  </li>
                  <li>
                    <a href="#tracking-customer-details" class="toc-h2 toc-link" data-title="Tracking Customer Details">Tracking Customer Details</a>
                  </li>
                  <li>
                    <a href="#request-user-data-for-ccpa-gdpr" class="toc-h2 toc-link" data-title="Request User Data for CCPA/GDPR">Request User Data for CCPA/GDPR</a>
                  </li>
                  <li>
                    <a href="#deleting-user-data-for-ccpa-gdpr" class="toc-h2 toc-link" data-title="Deleting User Data for CCPA/GDPR"><strong>Deleting User Data for CCPA/GDPR</strong></a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#merchant-api-mapi-" class="toc-h1 toc-link" data-title="Merchant API Details">Merchant API Details</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#merchant-api-mapi--public" class="toc-h1 toc-link" data-title="public">public</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#postauthorization" class="toc-h2 toc-link" data-title="postAuthorization">postAuthorization</a>
                  </li>
                  <li>
                    <a href="#postpersonalreferrallink" class="toc-h2 toc-link" data-title="postPersonalReferralLink">postPersonalReferralLink</a>
                  </li>
                  <li>
                    <a href="#postpurchaseevent" class="toc-h2 toc-link" data-title="postPurchaseEvent">postPurchaseEvent</a>
                  </li>
                  <li>
                    <a href="#postsignupevent" class="toc-h2 toc-link" data-title="postSignUpEvent">postSignUpEvent</a>
                  </li>
                  <li>
                    <a href="#postcustomevent" class="toc-h2 toc-link" data-title="postCustomEvent">postCustomEvent</a>
                  </li>
                  <li>
                    <a href="#postcustomer" class="toc-h2 toc-link" data-title="postCustomer">postCustomer</a>
                  </li>
                  <li>
                    <a href="#getuserdata" class="toc-h2 toc-link" data-title="getUserData">getUserData</a>
                  </li>
                  <li>
                    <a href="#deleteuserdata" class="toc-h2 toc-link" data-title="deleteUserData">deleteUserData</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#schemas" class="toc-h1 toc-link" data-title="Schemas">Schemas</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#tocS_authorizationRequest" class="toc-h2 toc-link" data-title="authorizationRequest">authorizationRequest</a>
                  </li>
                  <li>
                    <a href="#tocS_authorizationResponse" class="toc-h2 toc-link" data-title="authorizationResponse">authorizationResponse</a>
                  </li>
                  <li>
                    <a href="#tocS_personalReferralLinkRequest" class="toc-h2 toc-link" data-title="personalReferralLinkRequest">personalReferralLinkRequest</a>
                  </li>
                  <li>
                    <a href="#tocS_personalReferralLinkResponse" class="toc-h2 toc-link" data-title="personalReferralLinkResponse">personalReferralLinkResponse</a>
                  </li>
                  <li>
                    <a href="#tocS_customerRequest" class="toc-h2 toc-link" data-title="customerRequest">customerRequest</a>
                  </li>
                  <li>
                    <a href="#tocS_customerResponse" class="toc-h2 toc-link" data-title="customerResponse">customerResponse</a>
                  </li>
                  <li>
                    <a href="#tocS_purchaseEventRequest" class="toc-h2 toc-link" data-title="purchaseEventRequest">purchaseEventRequest</a>
                  </li>
                  <li>
                    <a href="#tocS_purchaseEventResponse" class="toc-h2 toc-link" data-title="purchaseEventResponse">purchaseEventResponse</a>
                  </li>
                  <li>
                    <a href="#tocS_customEventRequest" class="toc-h2 toc-link" data-title="customEventRequest">customEventRequest</a>
                  </li>
                  <li>
                    <a href="#tocS_customEventResponse" class="toc-h2 toc-link" data-title="customEventResponse">customEventResponse</a>
                  </li>
                  <li>
                    <a href="#tocS_signUpEventRequest" class="toc-h2 toc-link" data-title="signUpEventRequest">signUpEventRequest</a>
                  </li>
                  <li>
                    <a href="#tocS_signUpEventResponse" class="toc-h2 toc-link" data-title="signUpEventResponse">signUpEventResponse</a>
                  </li>
                  <li>
                    <a href="#tocS_userDataDeleteResponse" class="toc-h2 toc-link" data-title="userDataDeleteResponse">userDataDeleteResponse</a>
                  </li>
                  <li>
                    <a href="#tocS_userDataGetResponse" class="toc-h2 toc-link" data-title="userDataGetResponse">userDataGetResponse</a>
                  </li>
                  <li>
                    <a href="#tocS_Error" class="toc-h2 toc-link" data-title="Error">Error</a>
                  </li>
                  <li>
                    <a href="#tocS_purchaseEventRequest_products" class="toc-h2 toc-link" data-title="purchaseEventRequest_products">purchaseEventRequest_products</a>
                  </li>
                  <li>
                    <a href="#tocS_userDataGetResponse_trackedEvents" class="toc-h2 toc-link" data-title="userDataGetResponse_trackedEvents">userDataGetResponse_trackedEvents</a>
                  </li>
                  <li>
                    <a href="#tocS_userDataGetResponse_shares" class="toc-h2 toc-link" data-title="userDataGetResponse_shares">userDataGetResponse_shares</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='integration-setup'>Integration Setup</h1><h2 id='merchant-sdk-javascript'>Merchant SDK Javascript</h2>
<p>Below is the minimal integration to be placed in your site header. The tracking library and its instructions are designed to work asynchronously, so that if any anomalies should occur with friendbuy, there will be no impact to the behavior of your website.</p>
<pre class="highlight plaintext"><code>&lt;script&gt;
  window["friendbuyAPI"] = friendbuyAPI = window["friendbuyAPI"] || [];

  // registers your merchant using your merchant ID found in the
  // retailer app https://retailer.fbot.me/settings/general
  friendbuyAPI.merchantId = "REPLACE_WITH_YOUR_MERCHANT_ID";
  friendbuyAPI.push(["merchant", friendbuyAPI.merchantId]);

  // load the merchant SDK and your campaigns
  (function(f, r, n, d, b, u, y) {
    while ((u = n.shift())) {
      (b = f.createElement(r)), (y = f.getElementsByTagName(r)[0]);
      b.async = 1;
      b.src = u;
      y.parentNode.insertBefore(b, y);
    }
  })(document, "script", [
    "https://static.fbot.me/friendbuy.js",
    "https://campaign.fbot.me/" + friendbuyAPI.merchantId + "/campaigns.js",
  ]);
&lt;/script&gt;
</code></pre>
<p>Our friendbuy integration library is compatible with SPA (Single Page Application) design, see the <code>track page</code> section to report page changes.</p>
<h3 id='namespace-consideration'>Namespace consideration</h3>
<p>Only the <code>friendbuyAPI</code> variable is to be considered reserved on the <code>window</code> object. The friendbuy library (including its dependencies) is completely encapsulated and is only partially accessible through controlled <code>push(...)</code> calls on the <code>window.friendbuyAPI</code> gateway.</p>
<h1 id='tracking-events'>Tracking Events</h1><h2 id='tracking-call-api'>Tracking Call API</h2>
<p>Friendbuy comes with some built-in event tracking settings:</p>

<ul>
<li><code>email_capture</code></li>
<li><code>customer</code></li>
<li><code>purchase</code></li>
<li><code>product</code></li>
<li><code>page</code></li>
<li><code>sign_up</code></li>
</ul>

<p>This only means that when you are tracking these events, you are bound to respect a given format. You can also define your own custom event which won&#39;t have any restrictions.</p>

<p>A tracking event has the following format:</p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">friendbuyAPI</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span>
  <span class="s2">"track"</span><span class="p">,</span> <span class="c1">// this is a track event</span>
  <span class="s2">"email_capture"</span><span class="p">,</span> <span class="c1">// this is an event capture event</span>
  <span class="p">{</span>
    <span class="na">email</span><span class="p">:</span> <span class="s2">"john.doe@example.com"</span><span class="p">,</span> <span class="c1">// the email</span>
    <span class="na">name</span><span class="p">:</span> <span class="s2">"John Doe"</span><span class="p">,</span> <span class="c1">// the name (optional)</span>
    <span class="na">age</span><span class="p">:</span> <span class="mi">55</span><span class="p">,</span> <span class="c1">// the age (custom parameter)</span>
  <span class="p">},</span>
  <span class="kc">true</span><span class="p">,</span> <span class="c1">// Send custom parameters to friendbuy</span>
<span class="p">]);</span>
</code></pre><h3 id='event-metadata'>Event Metadata</h3>
<p>Every event sends the metadata of the current state. The metadata contains:</p>

<ul>
<li>Page title</li>
<li>Page name (through the track page event)</li>
<li>the name of the widget (under <code>widgetDisplayName</code> when relevant)</li>
<li>the page URL</li>
</ul>

<p>An event with metadata would looks like the following JSON:</p>
<pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"metadata"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"title"</span><span class="p">:</span> <span class="s2">"Welcome to Foo Store - Account page"</span><span class="p">,</span>
    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"account page"</span><span class="p">,</span>
    <span class="s2">"url"</span><span class="p">:</span> <span class="s2">"https://www.foo-store.com/account/user-1234"</span><span class="p">,</span>
    <span class="s2">"widgetDisplayName"</span><span class="p">:</span> <span class="s2">"widget foo bar baz"</span>
  <span class="p">},</span>
  <span class="s2">"payload"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"foo"</span><span class="p">,</span>
    <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"bar"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><h3 id='event-profile'>Event Profile</h3>
<p>All events must have a profile associated with them. The merchant SDK will always postpone events until a profile has been retrieved from friendbuy&#39;s backend.</p>

<p>More information about profile in the attribution documentation (information may not be disclosed in this documentation)</p>
<h3 id='event-routing'>Event Routing</h3>
<p>This is the journey of an event (up to our backend public API).</p>

<ol>
<li>An event is generated in the integration library.</li>
<li>If an event is considered &quot;controlled&quot; (<code>purchase</code>, <code>email_capture</code> ...) the event is validated.</li>
<li>The signed profile is added to the event request (we use pixel tracking).</li>
<li>The event is sent to the public endpoint of our backend.</li>
</ol>
<h2 id='event-rules-by-type'>Event rules by type</h2><h3 id='email-capture-event'>Email Capture Event</h3>
<table><thead>
<tr>
<th style="text-align: left">Attribute</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Required</th>
<th style="text-align: left">Example</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><code>email</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><strong>yes</strong></td>
<td style="text-align: left"><code>&quot;john.doe@example.com&quot;</code></td>
</tr>
<tr>
<td style="text-align: left"><code>name</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left">no</td>
<td style="text-align: left"><code>&quot;John Doe&quot;</code></td>
</tr>
<tr>
<td style="text-align: left"><code>campaignId</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left">no</td>
<td style="text-align: left"><code>&quot;572d3386-fa76-4d21-9190-2ac712b74428&quot;</code></td>
</tr>
</tbody></table>

<p>The only required field for an email capture event is the <code>email</code> field. A minimal email capture event is defined as followed:</p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">friendbuyAPI</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="s2">"track"</span><span class="p">,</span> <span class="s2">"email_capture"</span><span class="p">,</span> <span class="p">{</span> <span class="na">email</span><span class="p">:</span> <span class="s2">"john.doe@example.com"</span> <span class="p">}]);</span>
</code></pre>
<p>With the optional <code>name</code> attribute:</p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">friendbuyAPI</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span>
  <span class="s2">"track"</span><span class="p">,</span>
  <span class="s2">"email_capture"</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="na">email</span><span class="p">:</span> <span class="s2">"john.doe@example.com"</span><span class="p">,</span>
    <span class="na">name</span><span class="p">:</span> <span class="s2">"John"</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">]);</span>
</code></pre>
<p>All events accept additional information but these additional information will not be sent to friendbuy backend unless requested during the tracking call. If you want additional data to be sent to friendbuy, you&#39;ll have to add the boolean <code>true</code> to the list of argument passed to track as followed:</p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">friendbuyAPI</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span>
  <span class="s2">"track"</span><span class="p">,</span>
  <span class="s2">"email_capture"</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="na">email</span><span class="p">:</span> <span class="s2">"john.doe@example.com"</span><span class="p">,</span>
    <span class="na">subscribed</span><span class="p">:</span> <span class="s2">"yes"</span><span class="p">,</span> <span class="c1">// custom parameter</span>
  <span class="p">},</span>
  <span class="kc">true</span><span class="p">,</span> <span class="c1">// Send custom parameters to friendbuy</span>
<span class="p">]);</span>
</code></pre>
<p>This last <code>true</code> parameter will indicate to the merchant SDK that any additional custom fields you would like to track (in this case <code>subscribed</code>) need to be added to the event payload. This can be useful for example if a reward configuration requires additional information not provided by the event by default.</p>
<h3 id='customer-event'>Customer Event</h3>
<table><thead>
<tr>
<th style="text-align: left">Attribute</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Required</th>
<th style="text-align: left">Example</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><code>id</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><strong>yes</strong></td>
<td style="text-align: left"><code>&quot;c42526a0-86bb-4b2b-8015-3c88e5502fb3&quot;</code></td>
</tr>
<tr>
<td style="text-align: left"><code>email</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><strong>yes</strong></td>
<td style="text-align: left"><code>&quot;john.doe@example.com&quot;</code></td>
</tr>
<tr>
<td style="text-align: left"><code>name</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left">no</td>
<td style="text-align: left"><code>&quot;Johnny&quot;</code></td>
</tr>
<tr>
<td style="text-align: left"><code>firstName</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left">no</td>
<td style="text-align: left"><code>&quot;John&quot;</code></td>
</tr>
<tr>
<td style="text-align: left"><code>lastName</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left">no</td>
<td style="text-align: left"><code>&quot;Doe&quot;</code></td>
</tr>
<tr>
<td style="text-align: left"><code>isNewCustomer</code></td>
<td style="text-align: left">boolean</td>
<td style="text-align: left">no</td>
<td style="text-align: left"><code>false</code></td>
</tr>
<tr>
<td style="text-align: left"><code>campaignId</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left">no</td>
<td style="text-align: left"><code>&quot;572d3386-fa76-4d21-9190-2ac712b74428&quot;</code></td>
</tr>
</tbody></table>

<p>You can track a customer using the track customer endpoints. Track customer requires a least both an <code>id</code> and a valid <code>email</code>. You may also add the <code>isNewCustomer</code> information.</p>

<p>A minimal payload would look like this:</p>
<pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"customer-123"</span><span class="p">,</span>
  <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.doe@example.com"</span>
<span class="p">}</span>
</code></pre>
<p>While a complete payload could look like this:</p>
<pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"customer-123"</span><span class="p">,</span>
  <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"john.doe@example.com"</span><span class="p">,</span>
  <span class="s2">"firstName"</span><span class="p">:</span> <span class="s2">"John"</span><span class="p">,</span>
  <span class="s2">"lastName"</span><span class="p">:</span> <span class="s2">"Doe"</span><span class="p">,</span>
  <span class="s2">"isNewCustomer"</span><span class="p">:</span> <span class="kc">false</span>
<span class="p">}</span>
</code></pre>
<p>If you want to provide additional information you must add the boolean <code>true</code> as last argument</p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">friendbuyAPI</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span>
  <span class="s2">"track"</span><span class="p">,</span>
  <span class="s2">"customer"</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="na">email</span><span class="p">:</span> <span class="s2">"john.doe@example.com"</span><span class="p">,</span>
    <span class="na">id</span><span class="p">:</span> <span class="s2">"customer-123"</span><span class="p">,</span>
    <span class="na">name</span><span class="p">:</span> <span class="s2">"John"</span><span class="p">,</span>
    <span class="na">category</span><span class="p">:</span> <span class="s2">"vip"</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="kc">true</span><span class="p">,</span>
<span class="p">]);</span>
</code></pre><h3 id='purchase-event'>Purchase Event</h3>
<table><thead>
<tr>
<th style="text-align: left">Attribute</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Required</th>
<th style="text-align: left">Example</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><code>id</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><strong>yes</strong></td>
<td style="text-align: left"><code>&quot;ORD-4586&quot;</code></td>
</tr>
<tr>
<td style="text-align: left"><code>amount</code></td>
<td style="text-align: left">number</td>
<td style="text-align: left"><strong>yes</strong></td>
<td style="text-align: left"><code>55.50</code></td>
</tr>
<tr>
<td style="text-align: left"><code>currency</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><strong>yes</strong></td>
<td style="text-align: left"><code>&quot;USD&quot;</code></td>
</tr>
<tr>
<td style="text-align: left"><code>isNewCustomer</code></td>
<td style="text-align: left">boolean</td>
<td style="text-align: left">no</td>
<td style="text-align: left"><code>false</code></td>
</tr>
</tbody></table>

<p>Purchase accepts a sub-attribute <code>customer</code></p>

<table><thead>
<tr>
<th style="text-align: left">Customer sub-attribute</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Required</th>
<th style="text-align: left">Example</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><code>customer</code></td>
<td style="text-align: left">object</td>
<td style="text-align: left">no</td>
<td style="text-align: left"><em>Below fields are required only if customer provided</em></td>
</tr>
<tr>
<td style="text-align: left"><code>customer.id</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><em>yes</em></td>
<td style="text-align: left"><code>&quot;CUST-3821&quot;</code></td>
</tr>
<tr>
<td style="text-align: left"><code>customer.email</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><em>yes</em></td>
<td style="text-align: left"><code>&quot;john.doe@gmail.com&quot;</code></td>
</tr>
<tr>
<td style="text-align: left"><code>customer.name</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><em>yes</em></td>
<td style="text-align: left"><code>&quot;John Doe&quot;</code></td>
</tr>
</tbody></table>

<p>and a sub-attribute <code>products</code> (as an array)</p>

<table><thead>
<tr>
<th style="text-align: left">Products sub-attribute</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Required</th>
<th style="text-align: left">Example</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><code>products</code></td>
<td style="text-align: left">array</td>
<td style="text-align: left">no</td>
<td style="text-align: left"><em>An array of product objects as follows</em></td>
</tr>
<tr>
<td style="text-align: left"><code>products[0].sku</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left">no</td>
<td style="text-align: left"><code>&quot;PLU-8324-187&quot;</code> or default to <code>&quot;unknown&quot;</code></td>
</tr>
<tr>
<td style="text-align: left"><code>products[0].name</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left">no</td>
<td style="text-align: left"><code>&quot;Yellow Jacket</code></td>
</tr>
<tr>
<td style="text-align: left"><code>products[0].quantity</code></td>
<td style="text-align: left">number</td>
<td style="text-align: left"><em>yes</em></td>
<td style="text-align: left"><code>5</code></td>
</tr>
<tr>
<td style="text-align: left"><code>products[0].price</code></td>
<td style="text-align: left">number</td>
<td style="text-align: left"><em>yes</em></td>
<td style="text-align: left"><code>28.99</code></td>
</tr>
<tr>
<td style="text-align: left"><code>campaignId</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left">no</td>
<td style="text-align: left"><code>&quot;572d3386-fa76-4d21-9190-2ac712b74428&quot;</code></td>
</tr>
</tbody></table>

<p>Purchase event are the most common conversions. A minimal purchase track call would look like this:</p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">friendbuyAPI</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span>
  <span class="s2">"track"</span><span class="p">,</span>
  <span class="s2">"purchase"</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="na">id</span><span class="p">:</span> <span class="s2">"order-123"</span><span class="p">,</span>
    <span class="na">amount</span><span class="p">:</span> <span class="mf">57.87</span><span class="p">,</span>
    <span class="na">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">]);</span>
</code></pre>
<p>While a richer purchase track format, including customer and products could look like this:</p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">friendbuyAPI</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span>
  <span class="s2">"track"</span><span class="p">,</span>
  <span class="s2">"purchase"</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="na">id</span><span class="p">:</span> <span class="s2">"order-123"</span><span class="p">,</span>
    <span class="na">amount</span><span class="p">:</span> <span class="mf">57.87</span><span class="p">,</span>
    <span class="na">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="na">isNewCustomer</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">customer</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">email</span><span class="p">:</span> <span class="s2">"john.doe@example.com"</span><span class="p">,</span>
      <span class="na">name</span><span class="p">:</span> <span class="s2">"John Doe"</span><span class="p">,</span>
      <span class="na">id</span><span class="p">:</span> <span class="s2">"customer-123"</span><span class="p">,</span>
      <span class="na">category</span><span class="p">:</span> <span class="s2">"vip"</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="na">products</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="na">sku</span><span class="p">:</span> <span class="s2">"PLU-8542"</span><span class="p">,</span> <span class="na">quantity</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="na">price</span><span class="p">:</span> <span class="mf">5.54</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s2">"flowers"</span> <span class="p">},</span>
      <span class="p">{</span> <span class="na">sku</span><span class="p">:</span> <span class="s2">"PLU-8751"</span><span class="p">,</span> <span class="na">quantity</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="na">price</span><span class="p">:</span> <span class="mf">9.48</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s2">"chocolates"</span> <span class="p">},</span>
    <span class="p">],</span>
  <span class="p">},</span>
<span class="p">]);</span>
</code></pre><h3 id='product-event'>Product Event</h3>
<table><thead>
<tr>
<th style="text-align: left">Attribute</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Required</th>
<th style="text-align: left">Example</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><code>sku</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><strong>yes</strong></td>
<td style="text-align: left"><code>&quot;PLU-846871&quot;</code></td>
</tr>
<tr>
<td style="text-align: left"><code>name</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><strong>yes</strong></td>
<td style="text-align: left"><code>&quot;Yogurt&quot;</code></td>
</tr>
<tr>
<td style="text-align: left"><code>price</code></td>
<td style="text-align: left">number</td>
<td style="text-align: left">no</td>
<td style="text-align: left"><code>10.52</code></td>
</tr>
<tr>
<td style="text-align: left"><code>currency</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><em>yes</em> if <code>price</code></td>
<td style="text-align: left"><code>&quot;USD&quot;</code></td>
</tr>
<tr>
<td style="text-align: left"><code>category</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left">no</td>
<td style="text-align: left"><code>&quot;dairy&quot;</code></td>
</tr>
<tr>
<td style="text-align: left"><code>url</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left">no</td>
<td style="text-align: left"><code>&quot;https://www.example.com/product/846871&quot;</code></td>
</tr>
<tr>
<td style="text-align: left"><code>imageUrl</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left">no</td>
<td style="text-align: left"><code>&quot;https://static.example.com/product-846871.jpg&quot;</code></td>
</tr>
<tr>
<td style="text-align: left"><code>campaignId</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left">no</td>
<td style="text-align: left"><code>&quot;572d3386-fa76-4d21-9190-2ac712b74428&quot;</code></td>
</tr>
</tbody></table>

<p>We allow a merchant to capture a product view using this controlled event capture method. This event requires the following minimal format:</p>
<pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"sku"</span><span class="p">:</span> <span class="s2">"sku-123"</span><span class="p">,</span>
  <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Potatoes"</span>
<span class="p">}</span>
</code></pre>
<p>A minimal track product call would look as follow:</p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">friendbuyAPI</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="s2">"track"</span><span class="p">,</span> <span class="s2">"product"</span><span class="p">,</span> <span class="p">{</span> <span class="na">sku</span><span class="p">:</span> <span class="s2">"sku-123"</span><span class="p">,</span> <span class="na">name</span><span class="p">:</span> <span class="s2">"Potatoes"</span> <span class="p">}]);</span>
</code></pre>
<p>While a much richer call would look like</p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">friendbuyAPI</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span>
  <span class="s2">"track"</span><span class="p">,</span>
  <span class="s2">"product"</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="na">sku</span><span class="p">:</span> <span class="s2">"sku-potats"</span><span class="p">,</span>
    <span class="na">name</span><span class="p">:</span> <span class="s2">"Potatoes"</span><span class="p">,</span>
    <span class="na">price</span><span class="p">:</span> <span class="mf">0.51</span><span class="p">,</span>
    <span class="na">currency</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="na">category</span><span class="p">:</span> <span class="s2">"vegetables"</span><span class="p">,</span>
    <span class="na">url</span><span class="p">:</span> <span class="s2">"https://www.example.com/product/potats"</span><span class="p">,</span>
    <span class="na">imageUrl</span><span class="p">:</span> <span class="s2">"https://static.example.com/mr-potatoe.jpg"</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">]);</span>
</code></pre><h3 id='page-event'>Page Event</h3>
<table><thead>
<tr>
<th style="text-align: left">Attribute</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Required</th>
<th style="text-align: left">Example</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><code>name</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><strong>yes</strong></td>
<td style="text-align: left"><code>&quot;product page&quot;</code></td>
</tr>
</tbody></table>

<p>Page event allows you to track the page name. The page name simplifies targeting vs URLs which often requires wildcards. A page event payload only requires a <code>name</code></p>

<p>For example:</p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">friendbuyAPI</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="s2">"track"</span><span class="p">,</span> <span class="s2">"page"</span><span class="p">,</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="s2">"user account"</span> <span class="p">}]);</span>
</code></pre><h3 id='sign-up-event'>Sign Up Event</h3>
<table><thead>
<tr>
<th style="text-align: left">Attribute</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Required</th>
<th style="text-align: left">Example</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left"><code>id</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><strong>yes</strong></td>
<td style="text-align: left"><code>&quot;CUST-8348&quot;</code></td>
</tr>
<tr>
<td style="text-align: left"><code>email</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left"><strong>yes</strong></td>
<td style="text-align: left"><code>&quot;john.doe@example.com&quot;</code></td>
</tr>
<tr>
<td style="text-align: left"><code>name</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left">no</td>
<td style="text-align: left"><code>&quot;John&quot;</code></td>
</tr>
<tr>
<td style="text-align: left"><code>campaignId</code></td>
<td style="text-align: left">string</td>
<td style="text-align: left">no</td>
<td style="text-align: left"><code>&quot;572d3386-fa76-4d21-9190-2ac712b74428&quot;</code></td>
</tr>
</tbody></table>

<p>When a user creates an account, you can register this event using the <code>sign_up</code> event type. Note that a signup event will consider the user to be a new user (as opposed to a <a href="customer-event">track customer event</a>). The controlled fields for a sign up event are <code>id</code>, <code>email</code>, <code>name</code>, <code>campaignId</code>.</p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">friendbuyAPI</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span>
  <span class="s2">"track"</span><span class="p">,</span>
  <span class="s2">"sign_up"</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="na">email</span><span class="p">:</span> <span class="s2">"john.doe@example.com"</span><span class="p">,</span>
    <span class="na">id</span><span class="p">:</span> <span class="s2">"user-123"</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">]);</span>
</code></pre><h3 id='custom-event'>Custom Event</h3>
<p>In addition to the previous &quot;controlled&quot; events, you may decide to add your own custom event. For example you could trigger a &quot;video viewed&quot; custom event at the end of a marketing video or &quot;survey taken&quot; at the end of a quiz.</p>

<p>Note that a custom event will always send all the information it receives.</p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">friendbuyAPI</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span>
  <span class="s2">"track"</span><span class="p">,</span>
  <span class="s2">"video-viewed"</span><span class="p">,</span>
  <span class="p">{</span>
    <span class="na">id</span><span class="p">:</span> <span class="s2">"welcome-new-user-video"</span><span class="p">,</span>
    <span class="na">userId</span><span class="p">:</span> <span class="s2">"user-123"</span><span class="p">,</span>
    <span class="na">email</span><span class="p">:</span> <span class="s2">"john.doe@example.com"</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">]);</span>
</code></pre><h1 id='tracking-call-examples'>Tracking Call Examples</h1><h2 id='tracking-customer'>Tracking Customer</h2>
<p>You may provide the customer&#39;s information on the widget using a track customer call. This reduces friction during the sharing process by pre-filling these fields in the widget.</p>

<p>To track a customer use the following tracking call:</p>
<pre class="highlight plaintext"><code>&lt;script&gt;
  friendbuyAPI.push([
    "track",
    "customer",
    {
      id: "customer-1",
      email: "john.doe@example.com",
      firstName: "John",
      lastName: "Doe",
    },
  ]);
&lt;/script&gt;
</code></pre><h2 id='tracking-email'>Tracking email</h2>
<p>If you were to only know the email of the visitor, you can use the track email command which only requires an email to be captured.</p>
<pre class="highlight plaintext"><code>&lt;script&gt;
  friendbuyAPI.push([
    "track",
    "email",
    { email: "john.doe@example.com" },
  ]);
&lt;/script&gt;
</code></pre><h2 id='tracking-pages'>Tracking Pages</h2>
<p>You can name your pages to simplify widget display triggers and analytics. To do so, make sure the page you want to track includes the merchant SDK integration code above.</p>
<pre class="highlight plaintext"><code>&lt;script&gt;
  friendbuyAPI.push(["track", "page", { name: "home" }]);
&lt;/script&gt;
</code></pre>
<p>We recommend naming pages like &quot;product&quot;, &quot;homepage&quot;, &quot;post-purchase&quot;</p>
<h2 id='tracking-purchase'>Tracking Purchase</h2>
<p>Tracking a purchase requires a few mandatory fields:</p>

<ul>
<li><code>amount</code>, should be a number</li>
<li><code>id</code>, should be a non-null string</li>
<li><code>currency</code>, should be a 3 character currency code</li>
</ul>

<p>This would be a minimal purchase track call:</p>
<pre class="highlight plaintext"><code>&lt;script&gt;
  friendbuyAPI.push([
    "track",
    "purchase",
    { id: "order-1", amount: 55.45, currency: "USD" },
  ]);
&lt;/script&gt;
</code></pre><h3 id='new-customer-tracking'>New customer tracking</h3>
<p>If the purchase was made by a new customer, you can add this information to the tracking event. By default we will attempt to discover if the customer is to be considered a new customer. You may override that process by providing the <code>isNewCustomer</code> field.</p>
<pre class="highlight plaintext"><code>&lt;script&gt;
  friendbuyAPI.push([
    "track",
    "purchase",
    { id: "order-1", amount: 55.45, currency: "USD", isNewCustomer: true },
  ]);
&lt;/script&gt;
</code></pre><h3 id='tracking-purchase-customer'>Tracking purchase customer</h3>
<p>Optionally, you can also track purchase&#39;s customer, in which case, the customer <code>id</code> and the customer&#39;s <code>email</code> would be required</p>
<pre class="highlight plaintext"><code>&lt;script&gt;
  friendbuyAPI.push([
    "track",
    "purchase",
    {
      id: "order-1",
      amount: 55.45,
      currency: "USD",
      customer: {
        id: "customer-1",
        email: "jon.doe@example.com",
      },
    },
  ]);
&lt;/script&gt;
</code></pre><h3 id='tracking-purchase-products'>Tracking purchase products</h3>
<p>Finally, you can also add the products being purchased, in which case, the product <code>sku</code>, <code>price</code> and <code>quantity</code> will be required and should be contained in an array. This would give you a rich purchase tracking event as such:</p>
<pre class="highlight plaintext"><code>&lt;script&gt;
  friendbuyAPI.push([
    "track",
    "purchase",
    {
      id: "order-1",
      amount: 55.45,
      currency: "USD",
      customer: {
        id: "customer-1",
        email: "jon.doe@example.com",
      },
      products: [
        {
          name: "Cool Widget", // name is optional
          sku: "product-1",
          price: 20,
          quantity: 2,
        },
      ],
    },
  ]);
&lt;/script&gt;
</code></pre><h2 id='track-signup'>Track Signup</h2>
<p>To track a new subscription to your services, you may use the track <code>signup</code> call as follow:</p>
<pre class="highlight plaintext"><code>&lt;script&gt;
  friendbuyAPI.push([
    "track",
    "sign_up",
    {
      email: "john.doe@example.com",
      name: "John",
      id: "customer-2",
    },
  ]);
&lt;/script&gt;
</code></pre><h1 id='event-subscriptions'>Event Subscriptions</h1>
<p>In addition to tracking events and loading widgets, friendbuy&#39;s javascript can also be used to establish event listeners on some browser-based friendbuy events.</p>

<p>The currently supported event subscriptions are:</p>

<ul>
<li><code>couponReceived</code></li>
</ul>

<p>An event subscription will have the following format:</p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">friendbuyAPI</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="s2">"subscribe"</span><span class="p">,</span> <span class="s2">"couponReceived"</span><span class="p">,</span> <span class="nx">callback</span><span class="p">]);</span>
</code></pre>
<p>The <code>callback</code> parameter in the event subscription command is a function that will receive different values depending on the type of event. This function will be called in response to the subscribed event being triggered.</p>
<h3 id='couponreceived'>couponReceived</h3>
<p>The <code>couponReceived</code> event is triggered whenever a coupon is distributed to the user through a friendbuy widget. The callback function will receive the coupon code string that was distributed as its only argument.</p>
<h4 id='example-payload'>Example Payload</h4><pre class="highlight plaintext"><code>"20%-off-code"
</code></pre><h4 id='example-invocation'>Example Invocation</h4><pre class="highlight javascript tab-javascript"><code><span class="nx">friendbuyAPI</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="s2">"subscribe"</span><span class="p">,</span> <span class="s2">"couponReceived"</span><span class="p">,</span> 
    <span class="kd">function</span> <span class="p">(</span><span class="nx">coupon</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">coupon</span><span class="p">);</span> <span class="c1">// "20%-off-code"</span>
        <span class="c1">// Perform additional actions, like automatically</span>
        <span class="c1">// applying coupon code to next purchase.</span>
    <span class="p">}</span>
<span class="p">]);</span>
</code></pre><h1 id='webhooks'>Webhooks</h1><h2 id='retry-behavior'>Retry Behavior</h2>
<p>When a Webhook receives a status code that is not a 200, we will attempt to retry the request every 15 minutes until 24 hours have passed or a response code of 200 is received.</p>
<h2 id='signature-validation'>Signature Validation</h2>
<p>You can verify the authenticity of a webhook request or client API integration from friendbuy by analyzing its cryptographic signature. When friendbuy sends a request to your endpoints, a signature is placed in the X-Friendbuy-Hmac-SHA256 header, and is computed by Base64-encoding the HMAC-SHA1 hash of the request body with your friendbuy secret key. To verify the signature:</p>

<ol>
<li>Calculate an HMAC-SHA-256 composition of the JSON request body: <code>HMAC(api_secret, json_body)</code></li>
<li>Base64 encode the resulting value.</li>
<li>If the Base64 encoded hash matches the signature header, the request is valid.</li>
<li>Calculate an HMAC-SHA-256 composition of the JSON request body: <code>HMAC(api_secret, json_body)</code></li>
<li>Base64 encode the resulting value.</li>
<li>If the Base64 encoded hash matches the signature header, the request is valid.</li>
</ol>

<p>NodeJS Example:</p>
<pre class="highlight javascript tab-javascript"><code><span class="kr">export</span> <span class="kd">function</span> <span class="nx">verifyWebhook</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">hmacSignature</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">providedHmac</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span><span class="nx">hmacSignature</span><span class="p">,</span> <span class="s2">"utf-8"</span><span class="p">);</span>
  <span class="kr">const</span> <span class="nx">generatedHash</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span>
    <span class="nx">crypto</span>
      <span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha256"</span><span class="p">,</span> <span class="nx">FRIENDBUY_SECRET_KEY</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="s2">"base64"</span><span class="p">),</span>
    <span class="s2">"utf-8"</span>
  <span class="p">);</span>
  <span class="kd">let</span> <span class="nx">hashEquals</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="nx">hashEquals</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">timingSafeEqual</span><span class="p">(</span><span class="nx">generatedHash</span><span class="p">,</span> <span class="nx">providedHmac</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">hashEquals</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">hashEquals</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p>You can get your Webhook secret key by going to Developer Center &gt; Webhooks and copying the Digital Signature in the retailer app.</p>
<h2 id='reward-webhook'>Reward Webhook</h2>
<p>A reward is created after a conversion is evaluated and determined to be rewardable (i.e. all business rules and fraud checks have been met and the reward falls into a specific tier).</p>

<p>The Reward Webhook is the preferred method for depositing credit or points into an Advocate’s account in your system.</p>

<p>After a reward is created, friendbuy will send a POST request to your system with data about the reward.</p>
<h3 id='payload'>Payload</h3>
<table><thead>
<tr>
<th style="text-align: left">Property</th>
<th style="text-align: left">type</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">id</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The id of the webhook. Useful for troubleshooting.</td>
</tr>
<tr>
<td style="text-align: left">createdOn</td>
<td style="text-align: left">ISO timestamp</td>
<td style="text-align: left">The date and time the webhook request was made.</td>
</tr>
<tr>
<td style="text-align: left">data</td>
<td style="text-align: left">array of objects</td>
<td style="text-align: left">An array of webhook payloads, see definition below. Multiple rewards may fire in the same webhook if they happen in quick succession.</td>
</tr>
</tbody></table>

<p>Reward details will be available in the <code>data</code> property of the request with the following format:</p>

<table><thead>
<tr>
<th style="text-align: left">Property</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">rewardId</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The id of the reward. Useful for troubleshooting and preventing duplicate reward distributions.</td>
</tr>
<tr>
<td style="text-align: left">rewardType</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The type of the reward. One of <code>&quot;discount&quot;, &quot;credit&quot;, &quot;giftCard&quot;, &quot;cash&quot;, &quot;product&quot;, &quot;other&quot;, &quot;ledger&quot;, or &quot;integration&quot;</code></td>
</tr>
<tr>
<td style="text-align: left">rewardUnit</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The unit of the reward applicable to the <code>rewardType</code>currency code (e.g. &quot;USD&quot;), percent (&quot;%&quot;), or product SKU</td>
</tr>
<tr>
<td style="text-align: left">customerId</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The customer id of the advocate to be rewarded, if provided. Note: this is your customer ID provided to friendbuy through the javascript integration, not an internal ID generated by friendbuy.</td>
</tr>
<tr>
<td style="text-align: left">emailAddress</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The email address of the advocate to be rewarded.</td>
</tr>
<tr>
<td style="text-align: left">amount</td>
<td style="text-align: left">number</td>
<td style="text-align: left">The numerical value of the reward. Typically the value of the coupon or the amount of credit to deposit.</td>
</tr>
<tr>
<td style="text-align: left">createdOn</td>
<td style="text-align: left">ISO timestamp</td>
<td style="text-align: left">The date and time the reward was created.</td>
</tr>
<tr>
<td style="text-align: left">couponCode</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The coupon code that was distributed with this reward, if any.</td>
</tr>
</tbody></table>
<h3 id='example'>Example</h3>
<p>Here is an example of a reward webhook request:</p>
<pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"255e4e45-446d-499d-a680-44ab1eca73fb"</span><span class="p">,</span>
  <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"advocateReward"</span><span class="p">,</span>
  <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">"rewardId"</span><span class="p">:</span> <span class="s2">"73cb50ea-7ac8-4f90-9fe4-f5450866f3c0"</span><span class="p">,</span>
      <span class="s2">"rewardType"</span><span class="p">:</span> <span class="s2">"discount"</span><span class="p">,</span>
      <span class="s2">"rewardUnit"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
      <span class="s2">"emailAddress"</span><span class="p">:</span> <span class="s2">"test@example.com"</span><span class="p">,</span>
      <span class="s2">"rewardAmount"</span><span class="p">:</span> <span class="s2">"20.00"</span><span class="p">,</span>
      <span class="s2">"createdOn"</span><span class="p">:</span> <span class="s2">"2019-11-05T01:07:36.720Z"</span><span class="p">,</span>
      <span class="s2">"customerId"</span><span class="p">:</span> <span class="s2">"asd123-abcfasdf"</span><span class="p">,</span>
      <span class="s2">"couponCode"</span><span class="p">:</span> <span class="s2">"test-coupon-code"</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">"createdOn"</span><span class="p">:</span> <span class="s2">"2019-11-05T01:07:38.509Z"</span>
<span class="p">}</span>
</code></pre><h2 id='email-capture-webhook'>Email Capture Webhook</h2>
<p>An email capture is created when someone enters their email into a friend incentive widget or the email gate of a referral widget and checks the opt-in checkbox.</p>

<p>The email capture webhook can be used to funnel these emails into your system to add them into your mailing list or for internal record keeping amongst other uses.</p>

<p>After an email capture is created, Friendbuy will send a POST request to your system with data about the captured email.</p>

<p><strong>NOTE: The email capture widget will only fire if someone checks the opt-in checkbox before submitting their email address.</strong></p>
<h3 id='payload-2'>Payload</h3>
<table><thead>
<tr>
<th style="text-align: left">Property</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">id</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The id of the webhook. Useful for troubleshooting.</td>
</tr>
<tr>
<td style="text-align: left">createdOn</td>
<td style="text-align: left">ISO timestamp</td>
<td style="text-align: left">The date and time the webhook request was made.</td>
</tr>
<tr>
<td style="text-align: left">data</td>
<td style="text-align: left">array of objects</td>
<td style="text-align: left">An array of webhook payloads, see definition below. Multiple rewards may fire in the same webhook if they happen in quick succession.</td>
</tr>
</tbody></table>

<p>Email Capture details will be available in the <code>data</code> property of the request with the following format:</p>

<table><thead>
<tr>
<th style="text-align: left">Property</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">eventId</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The id of the email capture event. Useful for troubleshooting.</td>
</tr>
<tr>
<td style="text-align: left">emailAddress</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The email address entered into the email field.</td>
</tr>
<tr>
<td style="text-align: left">campaign</td>
<td style="text-align: left">object</td>
<td style="text-align: left">The campaign details for the campaign the email was captured with.</td>
</tr>
<tr>
<td style="text-align: left">incentive</td>
<td style="text-align: left">object</td>
<td style="text-align: left">The incentive associated with the email capture, if any.</td>
</tr>
</tbody></table>

<p>The <code>campaign</code> object in the payload has the following structure:</p>

<table><thead>
<tr>
<th style="text-align: left">Property</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">id</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The id of the campaign used to capture the email.</td>
</tr>
<tr>
<td style="text-align: left">name</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The name of the campaign used to capture the email.</td>
</tr>
</tbody></table>

<p>The <code>incentive</code> object in the payload has the following structure:</p>

<table><thead>
<tr>
<th style="text-align: left">Property</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">couponCode</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The coupon code given to the user for entering their email, if applicable.</td>
</tr>
<tr>
<td style="text-align: left">amount</td>
<td style="text-align: left">number</td>
<td style="text-align: left">The numerical value of the incentive.</td>
</tr>
<tr>
<td style="text-align: left">currency</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The currency of the incentive (i.e. &quot;USD&quot;).</td>
</tr>
</tbody></table>
<h3 id='example-2'>Example</h3>
<p>Here is an example of the email capture webhook</p>
<pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"255e4e45-446d-499d-a680-44ab1eca73fb"</span><span class="p">,</span>
  <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"emailCapture"</span><span class="p">,</span>
  <span class="s2">"data"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">"eventId"</span><span class="p">:</span> <span class="s2">"e6c720d4-b721-4789-a110-0d680777b802"</span><span class="p">,</span>
      <span class="s2">"emailAddress"</span><span class="p">:</span> <span class="s2">"test@example.com"</span><span class="p">,</span>
      <span class="s2">"campaign"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"8a7b9436-8b91-4022-b830-d405dfcc3964"</span><span class="p">,</span>
        <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Spring Campaign"</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="s2">"incentive"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">"couponCode"</span><span class="p">:</span> <span class="s2">"Test couponCode"</span><span class="p">,</span>
        <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
        <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">"createdOn"</span><span class="p">:</span> <span class="s2">"2019-11-05T01:07:38.509Z"</span>
<span class="p">}</span>
</code></pre><h1 id='reward-validation-callback'>Reward Validation Callback</h1><h3 id='overview'>Overview</h3>
<p>The Reward Validation Callback feature is used to determine whether or not Friendbuy should fulfill the reward for a conversion based on logic in your own system, such as returns or cancellations. This is meant to provide flexibility on top of the fraud checks and reward criteria that Friendbuy provides.</p>
<h3 id='how-it-works'>How it Works <a id="how-it-works"></a></h3>
<p>When validating a reward, we will make an HTTP POST request to the url provided in the Validation URL configuration of Reward Criteria. The HTTP response code returned by your system will indicate if the reward should be fulfilled or not. A response code of 200 will validate the reward. A response code of 400 will invalidate the reward. Any other response code will result be interpreted as an error and will trigger our retry protocol.</p>

<p>The request body will include details about the purchase that generated the conversion, such as Advocate data, purchase date, order id, and more. The full data included is described below.</p>
<h3 id='retry-behavior'>Retry Behavior</h3>
<p>When the Reward Validation Callback receives a status code that is not a 200 or a 400, we will attempt to retry the request every 15 minutes until 72 hours have passed or the reward is approved or rejected, whichever comes first. If at the end of 72 hours the response code is still something other than 200 or 400, we will reject the reward and note that status as an error. </p>
<h3 id='advocate'>advocate</h3><h2 id='payload'>Payload</h2>
<table><thead>
<tr>
<th style="text-align: left">Property</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">customerId</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The customer ID of the Advocate. Note: this is your customer ID provided to friendbuy through the javascript integration, not an internal ID generated by friendbuy.</td>
</tr>
<tr>
<td style="text-align: left">email</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The email address of the Advocate.</td>
</tr>
<tr>
<td style="text-align: left">ipAddress</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The IP Address of the Advocate.</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th style="text-align: left">Property</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">eventType</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The event type that triggered the conversion. Currently, only <code>purchase</code> events are supported by the Reward Validation Callback.</td>
</tr>
<tr>
<td style="text-align: left">purchase</td>
<td style="text-align: left">object</td>
<td style="text-align: left">Details about the purchase that triggered the reward. Described in detail below.</td>
</tr>
<tr>
<td style="text-align: left">createdOn</td>
<td style="text-align: left">ISO timestamp</td>
<td style="text-align: left">The date and time the event was created.</td>
</tr>
<tr>
<td style="text-align: left">campaignId</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The id of the campaign associated with the reward.</td>
</tr>
<tr>
<td style="text-align: left">advocate</td>
<td style="text-align: left">object</td>
<td style="text-align: left">Details about the Advocate who earned the reward. Described in detail below.</td>
</tr>
</tbody></table>
<h3 id='purchase'>purchase</h3>
<p>Event details will be available in the <code>purchase</code> property of the request with the following format:</p>

<table><thead>
<tr>
<th style="text-align: left">Property</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">id</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Order id of the purchase.</td>
</tr>
<tr>
<td style="text-align: left">amount</td>
<td style="text-align: left">number</td>
<td style="text-align: left">The order total.</td>
</tr>
<tr>
<td style="text-align: left">currency</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The currency of the purchase. For example: &quot;USD&quot;, &quot;GBP&quot;, &quot;CAD&quot;.</td>
</tr>
<tr>
<td style="text-align: left">isNewCustomer</td>
<td style="text-align: left">Boolean</td>
<td style="text-align: left">A true or false value indicating whether the user who made the purchase is a new customer or not.</td>
</tr>
<tr>
<td style="text-align: left">date</td>
<td style="text-align: left">ISO timestamp</td>
<td style="text-align: left">The date and time the purchase was made.</td>
</tr>
<tr>
<td style="text-align: left">products</td>
<td style="text-align: left">array</td>
<td style="text-align: left">A list of products purchased. Described in detail below.</td>
</tr>
<tr>
<td style="text-align: left">email</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The email address of the user who made the purchase.</td>
</tr>
<tr>
<td style="text-align: left">customerId</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The customer id of the user who made the purchase, if provided. Note: this is your customer ID provided to friendbuy through the javascript integration, not an internal ID generated by friendbuy.</td>
</tr>
<tr>
<td style="text-align: left">ipAddress</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The IP Address of the user who made the purchase.</td>
</tr>
</tbody></table>
<h3 id='product'>product</h3>
<p>Product details will be available in the <code>purchase.products</code> property of the request with the following format. Note: All product data is provided to friendbuy by the javascript integration</p>

<table><thead>
<tr>
<th style="text-align: left">Property</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: left">sku</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The SKU of the product.</td>
</tr>
<tr>
<td style="text-align: left">name</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The name of the product.</td>
</tr>
<tr>
<td style="text-align: left">quantity</td>
<td style="text-align: left">number</td>
<td style="text-align: left">How many of the product were purchased.</td>
</tr>
<tr>
<td style="text-align: left">price</td>
<td style="text-align: left">number</td>
<td style="text-align: left">The price of the product.</td>
</tr>
<tr>
<td style="text-align: left">currency</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The currency of the products price. For example: <code>USD</code>.</td>
</tr>
<tr>
<td style="text-align: left">description</td>
<td style="text-align: left">string</td>
<td style="text-align: left">A description of the product.</td>
</tr>
<tr>
<td style="text-align: left">category</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The category of the product.</td>
</tr>
<tr>
<td style="text-align: left">url</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The url of the product page.</td>
</tr>
<tr>
<td style="text-align: left">imageUrl</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The url of the product image.</td>
</tr>
</tbody></table>
<h2 id='example'>Example</h2><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"eventType"</span><span class="p">:</span> <span class="s2">"purchase"</span><span class="p">,</span>
  <span class="s2">"createdOn"</span><span class="p">:</span> <span class="s2">"2019-11-18T23:48:30.017Z"</span><span class="p">,</span>
  <span class="s2">"campaignId"</span><span class="p">:</span> <span class="s2">"89d78d25-6a33-4873-8b0e-410e3e7c10fa"</span><span class="p">,</span>
  <span class="s2">"purchase"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"id"</span><span class="p">:</span> <span class="s2">"order-66"</span><span class="p">,</span>
    <span class="s2">"amount"</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
    <span class="s2">"isNewCustomer"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">"ipAddress"</span><span class="p">:</span> <span class="s2">"12.156.140.124"</span><span class="p">,</span>
    <span class="s2">"date"</span><span class="p">:</span> <span class="s2">"2019-11-18T23:48:30.017Z"</span><span class="p">,</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"test@example.org"</span><span class="p">,</span>
    <span class="s2">"customerId"</span><span class="p">:</span> <span class="s2">"123"</span><span class="p">,</span>
    <span class="s2">"ipAddress"</span><span class="p">:</span> <span class="s2">"10.523.123.122"</span><span class="p">,</span>
    <span class="s2">"products"</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">"sku"</span><span class="p">:</span> <span class="s2">"test-product"</span><span class="p">,</span>
        <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Test Product"</span><span class="p">,</span>
        <span class="s2">"quantity"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s2">"price"</span><span class="p">:</span> <span class="mf">10.00</span><span class="p">,</span>
        <span class="s2">"currency"</span><span class="p">:</span> <span class="s2">"USD"</span><span class="p">,</span>
        <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"A test product"</span><span class="p">,</span>
        <span class="s2">"category"</span><span class="p">:</span> <span class="s2">"Apparel"</span><span class="p">,</span>
        <span class="s2">"url"</span><span class="p">:</span> <span class="s2">"https://example.org/test-product"</span><span class="p">,</span>
        <span class="s2">"imageUrl"</span><span class="p">:</span> <span class="s2">"https://example.org/test-product/image.jpg"</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="s2">"advocate"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"customerId"</span><span class="p">:</span> <span class="s2">"66"</span><span class="p">,</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"britain+test@friendbuy.com"</span><span class="p">,</span>
    <span class="s2">"ipAddress"</span><span class="p">:</span> <span class="s2">"12.156.140.124"</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><h3 id='signature-validation'>Signature Validation</h3>
<p>You can verify the authenticity of a webhook request or client API integration from friendbuy by analyzing its cryptographic signature. When friendbuy sends a request to your endpoints, a signature is placed in the X-Friendbuy-Hmac-SHA256 header, and is computed by Base64-encoding the HMAC-SHA1 hash of the request body with your friendbuy secret key. To verify the signature:</p>

<ol>
<li>Calculate an HMAC-SHA-256 composition of the JSON request body: <code>HMAC(api_secret, json_body)</code></li>
<li>Base64 encode the resulting value.</li>
<li>If the Base64 encoded hash matches the signature header, the request is valid.</li>
<li>Calculate an HMAC-SHA-256 composition of the JSON request body: <code>HMAC(api_secret, json_body)</code></li>
<li>Base64 encode the resulting value.</li>
<li>If the Base64 encoded hash matches the signature header, the request is valid.</li>
</ol>

<p>NodeJS Example:</p>
<pre class="highlight javascript tab-javascript"><code><span class="kr">export</span> <span class="kd">function</span> <span class="nx">verifyWebhook</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">hmacSignature</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">providedHmac</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span><span class="nx">hmacSignature</span><span class="p">,</span> <span class="s2">"utf-8"</span><span class="p">);</span>
  <span class="kr">const</span> <span class="nx">generatedHash</span> <span class="o">=</span> <span class="nx">Buffer</span><span class="p">.</span><span class="nx">from</span><span class="p">(</span>
    <span class="nx">crypto</span>
      <span class="p">.</span><span class="nx">createHmac</span><span class="p">(</span><span class="s2">"sha256"</span><span class="p">,</span> <span class="nx">FRIENDBUY_SECRET_KEY</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">digest</span><span class="p">(</span><span class="s2">"base64"</span><span class="p">),</span>
    <span class="s2">"utf-8"</span>
  <span class="p">);</span>
  <span class="kd">let</span> <span class="nx">hashEquals</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="nx">hashEquals</span> <span class="o">=</span> <span class="nx">crypto</span><span class="p">.</span><span class="nx">timingSafeEqual</span><span class="p">(</span><span class="nx">generatedHash</span><span class="p">,</span> <span class="nx">providedHmac</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">hashEquals</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">hashEquals</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p>You can get your Webhook secret key by going to Developer Center &gt; Webhooks and copying the Digital Signature in the retailer app.</p>
<h1 id='customer-authentication'>Customer Authentication</h1><h2 id='summary'><strong>Summary</strong></h2>
<p>Customer Authentication is an additional security measure that enables additional functionality for the end user within Friendbuy’s widgets and integrations. Note that Customer Authentication should only be done after a Customer has already been tracked by Friendbuy. Customer Authentication enables the following features:</p>

<ul>
<li>Loyalty Opt-In</li>
<li>Ledger Transactions (i.e. redemption of account credit, awarding credit for referrals)</li>
<li>Referral Dashboards in widgets

<ul>
<li>Includes listing referred friends and reward counts</li>
</ul></li>
</ul>
<h2 id='instructions'>Instructions</h2>
<p>In order to authenticate a customer, you will need to create an authentication string composed of the following separated by colons:</p>

<ul>
<li>Current epoch time </li>
<li>Customer email</li>
<li>Customer id</li>
</ul>
<pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">epoch</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">authString</span> <span class="o">=</span> <span class="nx">epoch</span> <span class="o">+</span> <span class="s2">":"</span> <span class="o">+</span> <span class="nx">customerEmail</span> <span class="o">+</span> <span class="s2">":"</span> <span class="o">+</span> <span class="nx">customerUserId</span><span class="p">;</span>
<span class="c1">// Example:  epoch + ":test@example.com:57ec28c3-0834-42cc-8522-9ed6dab0e04a";</span>
</code></pre>
<p>You will then need to create an HMAC SHA256 signature from the authentication string using the Secret Key from your Friendbuy account.</p>
<pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">signature</span> <span class="o">=</span> <span class="nx">sha256</span><span class="p">.</span><span class="nx">hmac</span><span class="p">(</span><span class="nx">secretKey</span><span class="p">,</span> <span class="nx">authString</span><span class="p">);</span>
</code></pre>
<p><strong>NOTE: Never expose your secret key on the frontend. The signature should be calculated by the backend and then passed to the frontend.</strong></p>

<p>Finally, track the authentication using the authentication string and the signature.</p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">friendbuyAPI</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="s2">"auth"</span><span class="p">,</span> <span class="nx">authString</span><span class="p">,</span> <span class="nx">signature</span><span class="p">]);</span>
</code></pre><h2 id='php-example'><strong>PHP Example</strong></h2><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="nv">$customerEmail</span> <span class="o">=</span> <span class="s1">'customer@example.com'</span><span class="p">;</span>
<span class="nv">$customerUserId</span> <span class="o">=</span> <span class="s1">'CUSTOMER123'</span><span class="p">;</span>
<span class="nv">$secret</span> <span class="o">=</span> <span class="s1">'[your friendbuy secret key]'</span><span class="p">;</span>
<span class="nv">$epoch</span> <span class="o">=</span> <span class="nb">time</span><span class="p">();</span>
<span class="nv">$authString</span> <span class="o">=</span> <span class="nv">$epoch</span> <span class="o">.</span> <span class="s1">':'</span> <span class="o">.</span> <span class="nv">$customerEmail</span> <span class="o">.</span> <span class="s1">':'</span> <span class="o">.</span> <span class="nv">$customerUserId</span><span class="p">;</span>
<span class="nv">$signature</span> <span class="o">=</span> <span class="nb">hash_hmac</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">,</span> <span class="nv">$authString</span><span class="p">,</span> <span class="nv">$secret</span><span class="p">);</span>
<span class="cp">?&gt;</span>

<span class="nt">&lt;script&gt;</span><span class="err">
const authString = "</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$authString</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="err">";
const signature = "</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$signature</span><span class="p">;</span> <span class="cp">?&gt;</span><span class="s2">";

window["</span><span class="nx">friendbuyAPI</span><span class="s2">"] = friendbuyAPI = window["</span><span class="nx">friendbuyAPI</span><span class="s2">"] || [];

friendbuyAPI.push(["</span><span class="nx">auth</span><span class="err">"</span><span class="p">,</span> <span class="nx">authString</span><span class="p">,</span> <span class="nx">signature</span><span class="p">]);</span>
<span class="nt">&lt;/script&gt;</span>

</code></pre>
<p>Again, never expose your secret key, never calculate the signature on the front end. </p>
<h1 id='merchant-api-guides'>Merchant API Guides</h1><h2 id='summary'>Summary</h2>
<p>The Friendbuy Merchant API is a REST API that allows for communication directly with Friendbuy.</p>

<p>Common use cases for the Merchant API are:</p>

<ul>
<li>Create purchases, signups, and custom events</li>
<li>Create customer records in Friendbuy</li>
<li>Create referral links for a customer or email.</li>
<li>Retrieve user data for CCPA and GDPR</li>
<li>Delete user data for CCPA and GDPR</li>
<li>And many more to come</li>
</ul>
<h2 id='base-url'>Base URL</h2>
<p>The base URL for all Friendbuy Merchant API endpoints is https://mapi.fbot.me/v1. For full reference documentation, see <a href="https://app.swaggerhub.com/apis/friendbuy/Friendbuy-mapi/1.1.0">https://app.swaggerhub.com/apis/friendbuy/Friendbuy-mapi/1.1.0</a>.</p>
<h2 id='authorization'>Authorization</h2><h3 id='summary-2'>Summary</h3>
<p>The Friendbuy Merchant API uses Bearer Tokens to authorize requests.</p>

<p>To get a Bearer Token for authorization:</p>

<ol>
<li>Get your access key and secret key from the retailer app</li>
<li>Make a POST request to <strong>/authorization</strong>:

<ol>
<li>Set the <strong>Content-Type</strong> header to <strong>application/json</strong></li>
<li>The body for the request should be json containing two parameters, access key and secret key</li>
</ol></li>
<li>The response will contain a bearer token in the “<strong>token</strong>” property and the expiration date of the token</li>
<li>You will use this token to authorize any further API requests.</li>
</ol>
<h3 id='example-request-body'>Example Request Body</h3><pre class="highlight plaintext"><code>{
  "key": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
  "secret": "95eb1c78-f77e-4c55-828e-17ed3e0163a2"
}
</code></pre><h3 id='example-response-body'>Example Response Body</h3><pre class="highlight plaintext"><code>{
  "tokenType": "Bearer",
  "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiO...",
  "expires": "2020-03-20T22:58:56.588Z"
}
</code></pre><h2 id='generating-referral-links'>Generating Referral Links</h2><h3 id='summary-3'>Summary</h3>
<p>The Friendbuy Merchant API can be used to generate a personal referral link for a specific advocate/campaign combination. The email of the advocate and the id of the campaign you want the link to be associated with are required. Additional parameters including customer id, first name, and last name can also be provided to associate additional details with the referral link.</p>

<p>To retrieve a personal referral link, make a <strong>POST</strong> request to <strong>/personal-referral-links</strong>. The response will include the personal referral link in the “link” parameter.</p>

<p>You can then distribute this link however you wish. Common use cases involve sending a personal referral link to a subset of customers through email to promote the referral program and retrieving a link to be displayed within a mobile app.</p>
<h3 id='example-request-body-2'><strong>Example Request Body</strong></h3><pre class="highlight plaintext"><code>{
  "email": "test@example.com",
  "campaignId": "3fa85f64-5717-4562-b3fc-2c963f66afa6",
  "customerId": "string",
  "firstName": "John",
  "lastName": "Smith",
  "destinationUrlQueryParams": {"vip": true},
}
</code></pre><h3 id='example-response-body-2'><strong>Example Response Body</strong></h3><pre class="highlight plaintext"><code>{
  "link": "https://fbuy.io/xhaf5hps",
  "createdOn": "2020-01-05T01:07:38.509Z"
}
</code></pre><h2 id='tracking-a-purchase'>Tracking a Purchase</h2><h3 id='summary-4'><strong>Summary</strong></h3>
<p>The Friendbuy Merchant API can be used to send purchase events to Friendbuy as an alternative or supplement to our Javascript-based pixel tracking. Common use cases include tracking purchases that occur offline and purchases that occur within a mobile app.</p>

<p>When you submit a purchase using the Friendbuy Merchant API, you must submit a unique order id, a purchase amount, and the currency the purchase was in. We strongly recommend passing the email and/or customer id of the user who made the purchase. We also recommend passing a value for isNewCustomer, which we use as part of our reward criteria when determining if the advocate should earn a reward.</p>

<p>A key component of tracking a purchase through the Merchant API is the ability to pass in a referral code or coupon code with the purchase. If either of these values is present, we will attempt to use the referral code and then the coupon code to establish attribution to the advocate that referred the user making the purchase. <strong>NOTE: the coupon code must have been distributed from a Friend Incentive widget in order for Friendbuy to establish attribution.</strong></p>

<p>Lastly, product details may be passed to facilitate rewards based on purchasing a specific product.</p>

<p>To track a purchase, make a <strong>POST</strong> request to <strong>/event/purchase.</strong></p>
<h3 id='example-request-body-3'><strong>Example Request Body</strong></h3><pre class="highlight plaintext"><code>{
  "orderId": "test-order-123",
  "email": "user@example.com",
  "customerId": "15534334",
  "firstName": "Test",
  "lastName": "User",
  "amount": 10.00,
  "currency": "USD",
  "isNewCustomer": false,
  "couponCode": "FRIEND-OFFER-244432",
  "refCode": "xhaf5hps",
  "products": [
    {
      "sku": "SKU123324",
      "name": "Test Produce",
      "quantity": 1,
      "price": 10.00
    }
  ],
}
</code></pre><h3 id='example-response-body-3'><strong>Example Response Body</strong></h3><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"eventId"</span><span class="p">:</span> <span class="s2">"3fa85f64-5717-4562-b3fc-2c963f66afa6"</span><span class="p">,</span>
  <span class="s2">"createdOn"</span><span class="p">:</span> <span class="s2">"2020-03-05T01:07:38.509Z"</span>
<span class="p">}</span>
</code></pre><h2 id='tracking-a-signup'><strong>Tracking a Signup</strong></h2><h3 id='summary-5'><strong>Summary</strong></h3>
<p>In much the same way that the Friendbuy Merchant API can be used to track purchases, it can also be used to track account signups. Tracking account signups is completely optional, but depending on your campaign settings you may want to track signups if they are an integral part of your referral flow (i.e. you want to reward signups differently than purchases). <strong>NOTE: The ability to configure rewards differently for signups is not yet exposed in the Friendbuy Retailer App but can be configured on the backend by Friendbuy.</strong></p>

<p>Tracking a signup through the API requires an email address and a customer id. You can also optionally pass in customer first name and last name, referral code, and coupon code.</p>

<p>Like with purchases, Friendbuy will attempt to establish attribution if referral code or coupon code is passed in.</p>

<p>To track a signup, make a <strong>POST</strong> request to <strong>/event/account-sign-up</strong></p>
<h3 id='example-request-body-4'><strong>Example Request Body</strong></h3><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"user@example.com"</span><span class="p">,</span>
  <span class="s2">"customerId"</span><span class="p">:</span> <span class="s2">"15529938"</span><span class="p">,</span>
  <span class="s2">"firstName"</span><span class="p">:</span> <span class="s2">"Test"</span><span class="p">,</span>
  <span class="s2">"lastName"</span><span class="p">:</span> <span class="s2">"User"</span><span class="p">,</span>
  <span class="s2">"refCode"</span><span class="p">:</span> <span class="s2">"xhaf5hps"</span><span class="p">,</span>
  <span class="s2">"couponCode"</span><span class="p">:</span> <span class="s2">"FRIEND-OFFER-244432"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre><h3 id='example-response-body-4'><strong>Example Response Body</strong></h3><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"eventId"</span><span class="p">:</span> <span class="s2">"3fa85f64-5717-4562-b3fc-2c963f66afa6"</span><span class="p">,</span>
  <span class="s2">"createdOn"</span><span class="p">:</span> <span class="s2">"2020-03-05T01:07:38.509Z"</span>
<span class="p">}</span>
</code></pre><h2 id='tracking-a-custom-event'><strong>Tracking a Custom Event</strong></h2><h3 id='summary-6'><strong>Summary</strong></h3>
<p>In addition to tracking purchases and signups, Friendbuy also allows you to track custom event types through the API.</p>

<p>Tracking a custom event through the Merchant API works just like tracking a signup, except that you are also required to pass an eventType. The eventType can be any string that you want to use to denote the event you are tracking. You must configure this event type in your campaign settings in order for it to be properly tracked and attributed to a campaign.</p>

<p>As with purchases and signups, Friendbuy will attempt to establish attribution to an advocate if referral code or coupon code is present</p>

<p>To track a custom event, make a <strong>POST</strong> request to <strong>/event/custom</strong>.</p>
<h3 id='example-request-body-5'>Example Request Body</h3><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"user@example.com"</span><span class="p">,</span>
  <span class="s2">"eventType"</span><span class="p">:</span> <span class="s2">"recurring_order"</span><span class="p">,</span>
  <span class="s2">"customerId"</span><span class="p">:</span> <span class="s2">"15529938"</span>
  <span class="s2">"isNewCustomer"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="s2">"firstName"</span><span class="p">:</span> <span class="s2">"Test"</span><span class="p">,</span>
  <span class="s2">"lastName"</span><span class="p">:</span> <span class="s2">"User"</span><span class="p">,</span>
  <span class="s2">"refCode"</span><span class="p">:</span> <span class="s2">"xhaf5hps"</span><span class="p">,</span>
  <span class="s2">"couponCode"</span><span class="p">:</span> <span class="s2">"FRIEND-OFFER-244432"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre><h3 id='example-response-body-5'>Example Response Body</h3><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"eventId"</span><span class="p">:</span> <span class="s2">"3fa85f64-5717-4562-b3fc-2c963f66afa6"</span><span class="p">,</span>
  <span class="s2">"createdOn"</span><span class="p">:</span> <span class="s2">"2020-03-05T01:07:38.509Z"</span>
<span class="p">}</span>
</code></pre><h2 id='tracking-customer-details'>Tracking Customer Details</h2><h3 id='summary-7'>Summary</h3>
<p>Many Friendbuy Merchant API endpoints allow for the tracking of limited customer data. In some cases, you may wish to fill in detailed information for all or certain customers. Email and customerId are required values. You can also track the following: isNewCustomer, firstName, lastName, age, gender, zipCode, state, city, category, country, language.</p>

<p><strong>The primary use case of tracking customer details will be to facilitate widget and reward targeting and segmentation when that feature is released in the future.</strong></p>

<p>To track a customer make a <strong>POST</strong> request to <strong>/customer</strong></p>
<h3 id='example-request-body-6'><strong>Example Request Body</strong></h3><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"user@example.com"</span><span class="p">,</span>
  <span class="s2">"customerId"</span><span class="p">:</span> <span class="s2">"328989893"</span><span class="p">,</span>
  <span class="s2">"isNewCustomer"</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="s2">"firstName"</span><span class="p">:</span> <span class="s2">"Test"</span><span class="p">,</span>
  <span class="s2">"lastName"</span><span class="p">:</span> <span class="s2">"User"</span><span class="p">,</span>
  <span class="s2">"age"</span><span class="p">:</span> <span class="mi">23</span><span class="p">,</span>
  <span class="s2">"gender"</span><span class="p">:</span> <span class="s2">"male"</span><span class="p">,</span>
  <span class="s2">"zipCode"</span><span class="p">:</span> <span class="s2">"90038"</span><span class="p">,</span>
  <span class="s2">"state"</span><span class="p">:</span> <span class="s2">"CA"</span><span class="p">,</span>
  <span class="s2">"city"</span><span class="p">:</span> <span class="s2">"West Hollywood"</span><span class="p">,</span>
  <span class="s2">"category"</span><span class="p">:</span> <span class="s2">"VIP"</span><span class="p">,</span>
  <span class="s2">"country"</span><span class="p">:</span> <span class="s2">"USA"</span><span class="p">,</span>
  <span class="s2">"language"</span><span class="p">:</span> <span class="s2">"English"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre><h3 id='example-response-body-6'><strong>Example Response Body</strong></h3><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"customerId"</span><span class="p">:</span> <span class="s2">"7b5e9a0a-3386-49c8-84d7-6d4047639285"</span><span class="p">,</span>
  <span class="s2">"createdOn"</span><span class="p">:</span> <span class="s2">"2020-03-05T01:07:38.509Z"</span>
<span class="p">}</span>
</code></pre><h2 id='request-user-data-for-ccpa-gdpr'>Request User Data for CCPA/GDPR</h2><h3 id='summary-8'><strong>Summary</strong></h3>
<p>In order to comply with CCPA and GDPR requirements, Friendbuy supports the retrieval of any user data for a given email address or customer id. When a request is made, Friendbuy will return the following data points that we have associated with the email address or customer id:</p>

<ul>
<li>Emails</li>
<li>Names</li>
<li>Customer Ids</li>
<li>IP Addresses</li>
<li>Languages</li>
<li>User Agents</li>
<li>Device Data including

<ul>
<li>Color depths</li>
<li>Platforms</li>
<li>Screen sizes</li>
</ul></li>
<li>Tracked events</li>
<li>Share counts by channel</li>
<li>Conversion counts by channel</li>
</ul>

<p>*<strong>*To make a request for user data, make a **GET</strong> request to **/user-data** providing the email or customer id as a query string parameter.</p>
<h3 id='example-requests'><strong>Example Requests</strong></h3><pre class="highlight plaintext"><code>GET /user-data?email=test@example.com
GET /user-data?customerID=1554332
</code></pre><h3 id='example-response-body-7'><strong>Example Response Body</strong></h3><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"emails"</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">"user@example.com"</span><span class="p">,</span> <span class="s2">"test@example.com"</span>
  <span class="p">],</span>
  <span class="s2">"names"</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">"Test User"</span><span class="p">,</span> <span class="s2">"Other User"</span>
  <span class="p">],</span>
  <span class="s2">"customerIds"</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">"1554332"</span>
  <span class="p">],</span>
  <span class="s2">"ipAddresses"</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">"127.0.0.0.1"</span>
  <span class="p">],</span>
  <span class="s2">"languages"</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">"English"</span><span class="p">,</span> <span class="s2">"Spanish"</span>
  <span class="p">],</span>
  <span class="s2">"userAgents"</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">"Mozilla/5.0 (Macintosh; Intel Mac OS X x.y; rv:42.0) Gecko/20100101 Firefox/42.0"</span>
  <span class="p">],</span>
  <span class="s2">"colorDepths"</span><span class="p">:</span> <span class="p">[</span>
    <span class="mi">0</span>
  <span class="p">],</span>
  <span class="s2">"platforms"</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">"IOS"</span>
  <span class="p">],</span>
  <span class="s2">"screenSizes"</span><span class="p">:</span> <span class="p">[</span>
    <span class="s2">"3072x1920"</span>
  <span class="p">],</span>
  <span class="s2">"trackedEvents"</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">"type"</span><span class="p">:</span> <span class="s2">"purchase"</span><span class="p">,</span>
      <span class="s2">"url"</span><span class="p">:</span> <span class="s2">"https://example.com"</span>
    <span class="p">}</span>
  <span class="p">],</span>
  <span class="s2">"shares"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
    <span class="s2">"facebook"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">"messenger"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">"sms"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">"twitter"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">"purl"</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">},</span>
  <span class="s2">"conversions"</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">"email"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="s2">"facebook"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">"messenger"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">"sms"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">"twitter"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">"purl"</span><span class="p">:</span> <span class="mi">3</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><h2 id='deleting-user-data-for-ccpa-gdpr'><strong>Deleting User Data for CCPA/GDPR</strong></h2><h3 id='summary-9'><strong>Summary</strong></h3>
<p>In addition to retrieving user data for CCPA or GDPR, the Friendbuy Merchant API also allows you to request the deletion of user data to fulfill deletion requests from end-users. The response body contains a task_id that can be used for troubleshooting if necessary. All deletion requests run asynchronously, so if the request is successfully registered you will receive a response code of 204. Any other response code indicates an error.</p>

<p><strong>NOTE: Once this request is made any data associated with that email or customer id (as indicated by the GET /user-data endpoint) will be permanently deleted or redacted as appropriate. This action is completely irreversible, so be sure you want to delete this data before making the request.</strong></p>

<p>To request data deletion for a given email address or customer id, make a <strong>DELETE</strong> request to <strong>/user-data</strong> providing the email and/or customer id of the user requesting deletion as a query string parameter</p>
<h3 id='example-requests-2'>Example Requests</h3><pre class="highlight plaintext"><code>DELETE /user-data?email=test@example.com
DELETE /user-data?customerID=1554332
</code></pre><h3 id='example-response'><strong>Example Response</strong></h3><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
  <span class="s2">"task_id"</span><span class="p">:</span> <span class="s2">"47fd3e67-8659-42f2-9d03-192d82a48651"</span>
<span class="p">}</span>
</code></pre><!-- Generator: Widdershins v4.0.1 -->

<h1 id="merchant-api-mapi-">Merchant API Details</h1>

<blockquote>
<p>Scroll down for code samples, example requests and responses. Select a language for code samples from the tabs above or the mobile navigation menu.</p>
</blockquote>

<p>Example public API for FriendBuy</p>

<p>Base URLs:</p>

<ul>
<li><a href="https://mapi.fbot.me">https://mapi.fbot.me</a></li>
</ul>

<p>Email: <a href="mailto:support@friendbuy.com">Support</a>
License: <a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache 2.0</a></p>
<h1 id='authentication'>Authentication</h1>
<ul>
<li>HTTP Authentication, scheme: bearer</li>
</ul>

<h1 id="merchant-api-mapi--public">public</h1>

<p>Public facing API</p>
<h2 id='postauthorization'>postAuthorization</h2>
<p><a id="opIdpostAuthorization"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># You can also use wget</span>
curl -X POST https://mapi.fbot.me/v1/authorization <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'Accept: application/json'</span>

</code></pre><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">https://mapi.fbot.me/v1/authorization</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">mapi.fbot.me</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>

</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">inputBody</span> <span class="o">=</span> <span class="s1">'{
  "key": "string",
  "secret": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiO..."
}'</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span><span class="p">:</span><span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Accept'</span><span class="p">:</span><span class="s1">'application/json'</span>
<span class="p">};</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://mapi.fbot.me/v1/authorization'</span><span class="p">,</span>
<span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">inputBody</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span> <span class="s1">'https://mapi.fbot.me/v1/authorization'</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span>
  <span class="p">},</span> <span class="ss">headers: </span><span class="n">headers</span>

<span class="nb">p</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'application/json'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://mapi.fbot.me/v1/authorization'</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="s1">'vendor/autoload.php'</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
    <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
<span class="p">);</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\GuzzleHttp\Client</span><span class="p">();</span>

<span class="c1">// Define array of request body.
</span><span class="nv">$request_body</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">'POST'</span><span class="p">,</span><span class="s1">'https://mapi.fbot.me/v1/authorization'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'headers'</span> <span class="o">=&gt;</span> <span class="nv">$headers</span><span class="p">,</span>
        <span class="s1">'json'</span> <span class="o">=&gt;</span> <span class="nv">$request_body</span><span class="p">,</span>
       <span class="p">)</span>
    <span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getContents</span><span class="p">());</span>
 <span class="p">}</span>
 <span class="k">catch</span> <span class="p">(</span><span class="nx">\GuzzleHttp\Exception\BadResponseException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle exception or api errors.
</span>    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">());</span>
 <span class="p">}</span>

 <span class="c1">// ...
</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://mapi.fbot.me/v1/authorization"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
    <span class="k">new</span> <span class="nf">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
<span class="n">String</span> <span class="n">inputLine</span><span class="o">;</span>
<span class="n">StringBuffer</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

</code></pre><pre class="highlight go tab-go"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
       </span><span class="s">"bytes"</span><span class="x">
       </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">headers</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/json"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/json"</span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span><span class="x"> </span><span class="s">"https://mapi.fbot.me/v1/authorization"</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">headers</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></code></pre>
<p><code>POST /v1/authorization</code></p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiO..."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="postauthorization-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td><a href="#schemaauthorizationrequest">authorizationRequest</a></td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» key</td>
<td>body</td>
<td>string(uuid)</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» secret</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"tokenType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"expires"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-07T22:57:03Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="postauthorization-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Successful authorization request.</td>
<td><a href="#schemaauthorizationresponse">authorizationResponse</a></td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>Invalid input, object invalid</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>401</td>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">Unauthorized</a></td>
<td>Unauthorized</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>422</td>
<td><a href="https://tools.ietf.org/html/rfc2518#section-10.3">Unprocessable Entity</a></td>
<td>Unprocessable Entity</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>429</td>
<td><a href="https://tools.ietf.org/html/rfc6585#section-4">Too Many Requests</a></td>
<td>Too many requests</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>500</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.6.1">Internal Server Error</a></td>
<td>Internal Server Error (uncontrolled failure)</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
</tbody></table>

<aside class="success">
This operation does not require authentication
</aside>
<h2 id='postpersonalreferrallink'>postPersonalReferralLink</h2>
<p><a id="opIdpostPersonalReferralLink"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># You can also use wget</span>
curl -X POST https://mapi.fbot.me/v1/personal-referral-link <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Bearer {access-token}'</span>

</code></pre><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">https://mapi.fbot.me/v1/personal-referral-link</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">mapi.fbot.me</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>

</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">inputBody</span> <span class="o">=</span> <span class="s1">'{
  "email": "test@example.com",
  "campaignId": "string",
  "customerId": "string",
  "firstName": "John",
  "lastName": "Smith",
  "destinationUrlQueryParams": {},
  "vanity": "string",
  "channel": "purl",
  "short": false,
  "ipAddress": "string",
  "userAgent": "api",
  "widgetId": "string",
  "eventUrl": "string",
  "eventPage": "string"
}'</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span><span class="p">:</span><span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Accept'</span><span class="p">:</span><span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span><span class="p">:</span><span class="s1">'Bearer {access-token}'</span>
<span class="p">};</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://mapi.fbot.me/v1/personal-referral-link'</span><span class="p">,</span>
<span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">inputBody</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">'Bearer {access-token}'</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span> <span class="s1">'https://mapi.fbot.me/v1/personal-referral-link'</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span>
  <span class="p">},</span> <span class="ss">headers: </span><span class="n">headers</span>

<span class="nb">p</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
  <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer {access-token}'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://mapi.fbot.me/v1/personal-referral-link'</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="s1">'vendor/autoload.php'</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
    <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
    <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">'Bearer {access-token}'</span><span class="p">,</span>
<span class="p">);</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\GuzzleHttp\Client</span><span class="p">();</span>

<span class="c1">// Define array of request body.
</span><span class="nv">$request_body</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">'POST'</span><span class="p">,</span><span class="s1">'https://mapi.fbot.me/v1/personal-referral-link'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'headers'</span> <span class="o">=&gt;</span> <span class="nv">$headers</span><span class="p">,</span>
        <span class="s1">'json'</span> <span class="o">=&gt;</span> <span class="nv">$request_body</span><span class="p">,</span>
       <span class="p">)</span>
    <span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getContents</span><span class="p">());</span>
 <span class="p">}</span>
 <span class="k">catch</span> <span class="p">(</span><span class="nx">\GuzzleHttp\Exception\BadResponseException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle exception or api errors.
</span>    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">());</span>
 <span class="p">}</span>

 <span class="c1">// ...
</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://mapi.fbot.me/v1/personal-referral-link"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
    <span class="k">new</span> <span class="nf">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
<span class="n">String</span> <span class="n">inputLine</span><span class="o">;</span>
<span class="n">StringBuffer</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

</code></pre><pre class="highlight go tab-go"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
       </span><span class="s">"bytes"</span><span class="x">
       </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">headers</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/json"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/json"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Authorization"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"Bearer {access-token}"</span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span><span class="x"> </span><span class="s">"https://mapi.fbot.me/v1/personal-referral-link"</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">headers</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></code></pre>
<p><code>POST /v1/personal-referral-link</code></p>

<p><em>Create or retrieve a personal URL for a given customer or email address and campaign.</em></p>

<p>Generate event</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"campaignId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"destinationUrlQueryParams"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"vanity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"purl"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"short"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ipAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"userAgent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"widgetId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"eventUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"eventPage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="postpersonalreferrallink-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td><a href="#schemapersonalreferrallinkrequest">personalReferralLinkRequest</a></td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» email</td>
<td>body</td>
<td>string(email)</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» campaignId</td>
<td>body</td>
<td>string(uuid)</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» customerId</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» firstName</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» lastName</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» destinationUrlQueryParams</td>
<td>body</td>
<td>object</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» vanity</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>Specifies the seed.</td>
</tr>
<tr>
<td>» channel</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» short</td>
<td>body</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» ipAddress</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» userAgent</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» widgetId</td>
<td>body</td>
<td>string(uuid)</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» eventUrl</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» eventPage</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
</tbody></table>
<h4 id='enumerated-values'>Enumerated Values</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>» channel</td>
<td>email</td>
</tr>
<tr>
<td>» channel</td>
<td>facebook</td>
</tr>
<tr>
<td>» channel</td>
<td>generic</td>
</tr>
<tr>
<td>» channel</td>
<td>instagram</td>
</tr>
<tr>
<td>» channel</td>
<td>messenger</td>
</tr>
<tr>
<td>» channel</td>
<td>sms</td>
</tr>
<tr>
<td>» channel</td>
<td>snap</td>
</tr>
<tr>
<td>» channel</td>
<td>twitter</td>
</tr>
<tr>
<td>» channel</td>
<td>purl</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"createdOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="postpersonalreferrallink-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Personal referral link already exists - returning the pre-existing record.</td>
<td><a href="#schemapersonalreferrallinkresponse">personalReferralLinkResponse</a></td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>Invalid input, object invalid</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>404</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.4">Not Found</a></td>
<td>Not found - campaign does not exist or is inactive.</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>422</td>
<td><a href="https://tools.ietf.org/html/rfc2518#section-10.3">Unprocessable Entity</a></td>
<td>Unprocessable Entity</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>429</td>
<td><a href="https://tools.ietf.org/html/rfc6585#section-4">Too Many Requests</a></td>
<td>Too many requests</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>500</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.6.1">Internal Server Error</a></td>
<td>Internal Server Error (uncontrolled failure)</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
bearerAuth
</aside>
<h2 id='postpurchaseevent'>postPurchaseEvent</h2>
<p><a id="opIdpostPurchaseEvent"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># You can also use wget</span>
curl -X POST https://mapi.fbot.me/v1/event/purchase <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Bearer {access-token}'</span>

</code></pre><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">https://mapi.fbot.me/v1/event/purchase</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">mapi.fbot.me</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>

</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">inputBody</span> <span class="o">=</span> <span class="s1">'{
  "orderId": "string",
  "email": "user@example.com",
  "customerId": "string",
  "firstName": "string",
  "lastName": "string",
  "amount": 0,
  "currency": "string",
  "isNewCustomer": false,
  "couponCode": "string",
  "refCode": "string",
  "products": [
    {
      "sku": "string",
      "name": "string",
      "quantity": 0,
      "price": 0
    }
  ],
  "additionalProperties": {
    "property1": "string",
    "property2": "string"
  },
  "ipAddress": "string",
  "userAgent": "api"
}'</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span><span class="p">:</span><span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Accept'</span><span class="p">:</span><span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span><span class="p">:</span><span class="s1">'Bearer {access-token}'</span>
<span class="p">};</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://mapi.fbot.me/v1/event/purchase'</span><span class="p">,</span>
<span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">inputBody</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">'Bearer {access-token}'</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span> <span class="s1">'https://mapi.fbot.me/v1/event/purchase'</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span>
  <span class="p">},</span> <span class="ss">headers: </span><span class="n">headers</span>

<span class="nb">p</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
  <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer {access-token}'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://mapi.fbot.me/v1/event/purchase'</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="s1">'vendor/autoload.php'</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
    <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
    <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">'Bearer {access-token}'</span><span class="p">,</span>
<span class="p">);</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\GuzzleHttp\Client</span><span class="p">();</span>

<span class="c1">// Define array of request body.
</span><span class="nv">$request_body</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">'POST'</span><span class="p">,</span><span class="s1">'https://mapi.fbot.me/v1/event/purchase'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'headers'</span> <span class="o">=&gt;</span> <span class="nv">$headers</span><span class="p">,</span>
        <span class="s1">'json'</span> <span class="o">=&gt;</span> <span class="nv">$request_body</span><span class="p">,</span>
       <span class="p">)</span>
    <span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getContents</span><span class="p">());</span>
 <span class="p">}</span>
 <span class="k">catch</span> <span class="p">(</span><span class="nx">\GuzzleHttp\Exception\BadResponseException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle exception or api errors.
</span>    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">());</span>
 <span class="p">}</span>

 <span class="c1">// ...
</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://mapi.fbot.me/v1/event/purchase"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
    <span class="k">new</span> <span class="nf">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
<span class="n">String</span> <span class="n">inputLine</span><span class="o">;</span>
<span class="n">StringBuffer</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

</code></pre><pre class="highlight go tab-go"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
       </span><span class="s">"bytes"</span><span class="x">
       </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">headers</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/json"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/json"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Authorization"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"Bearer {access-token}"</span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span><span class="x"> </span><span class="s">"https://mapi.fbot.me/v1/event/purchase"</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">headers</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></code></pre>
<p><code>POST /v1/event/purchase</code></p>

<p><em>Generate purchase event.</em></p>

<p>Generate purchase event</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"isNewCustomer"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"couponCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"additionalProperties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"property1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"property2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"ipAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"userAgent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="postpurchaseevent-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td><a href="#schemapurchaseeventrequest">purchaseEventRequest</a></td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» orderId</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» email</td>
<td>body</td>
<td>string(email)</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» customerId</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» firstName</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» lastName</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» amount</td>
<td>body</td>
<td>number</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» currency</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» isNewCustomer</td>
<td>body</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» couponCode</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» refCode</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» products</td>
<td>body</td>
<td>[<a href="#schemapurchaseeventrequest_products">purchaseEventRequest_products</a>]</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>»» sku</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>»» name</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>»» quantity</td>
<td>body</td>
<td>integer</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>»» price</td>
<td>body</td>
<td>integer</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» additionalProperties</td>
<td>body</td>
<td>object</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>»» <strong>additionalProperties</strong></td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» ipAddress</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» userAgent</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>201 Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"createdOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="postpurchaseevent-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>201</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.2">Created</a></td>
<td>Post event created</td>
<td><a href="#schemapurchaseeventresponse">purchaseEventResponse</a></td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>Invalid input, object invalid</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>422</td>
<td><a href="https://tools.ietf.org/html/rfc2518#section-10.3">Unprocessable Entity</a></td>
<td>Unprocessable Entity</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>429</td>
<td><a href="https://tools.ietf.org/html/rfc6585#section-4">Too Many Requests</a></td>
<td>Too many requests</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>500</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.6.1">Internal Server Error</a></td>
<td>Internal Server Error (uncontrolled failure)</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
bearerAuth
</aside>
<h2 id='postsignupevent'>postSignUpEvent</h2>
<p><a id="opIdpostSignUpEvent"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># You can also use wget</span>
curl -X POST https://mapi.fbot.me/v1/event/account-sign-up <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Bearer {access-token}'</span>

</code></pre><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">https://mapi.fbot.me/v1/event/account-sign-up</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">mapi.fbot.me</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>

</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">inputBody</span> <span class="o">=</span> <span class="s1">'{
  "email": "user@example.com",
  "customerId": "string",
  "firstName": "string",
  "lastName": "string",
  "refCode": "string",
  "couponCode": "string",
  "additionalProperties": {
    "property1": "string",
    "property2": "string"
  },
  "ipAddress": "string",
  "userAgent": "api"
}'</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span><span class="p">:</span><span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Accept'</span><span class="p">:</span><span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span><span class="p">:</span><span class="s1">'Bearer {access-token}'</span>
<span class="p">};</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://mapi.fbot.me/v1/event/account-sign-up'</span><span class="p">,</span>
<span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">inputBody</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">'Bearer {access-token}'</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span> <span class="s1">'https://mapi.fbot.me/v1/event/account-sign-up'</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span>
  <span class="p">},</span> <span class="ss">headers: </span><span class="n">headers</span>

<span class="nb">p</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
  <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer {access-token}'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://mapi.fbot.me/v1/event/account-sign-up'</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="s1">'vendor/autoload.php'</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
    <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
    <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">'Bearer {access-token}'</span><span class="p">,</span>
<span class="p">);</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\GuzzleHttp\Client</span><span class="p">();</span>

<span class="c1">// Define array of request body.
</span><span class="nv">$request_body</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">'POST'</span><span class="p">,</span><span class="s1">'https://mapi.fbot.me/v1/event/account-sign-up'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'headers'</span> <span class="o">=&gt;</span> <span class="nv">$headers</span><span class="p">,</span>
        <span class="s1">'json'</span> <span class="o">=&gt;</span> <span class="nv">$request_body</span><span class="p">,</span>
       <span class="p">)</span>
    <span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getContents</span><span class="p">());</span>
 <span class="p">}</span>
 <span class="k">catch</span> <span class="p">(</span><span class="nx">\GuzzleHttp\Exception\BadResponseException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle exception or api errors.
</span>    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">());</span>
 <span class="p">}</span>

 <span class="c1">// ...
</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://mapi.fbot.me/v1/event/account-sign-up"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
    <span class="k">new</span> <span class="nf">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
<span class="n">String</span> <span class="n">inputLine</span><span class="o">;</span>
<span class="n">StringBuffer</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

</code></pre><pre class="highlight go tab-go"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
       </span><span class="s">"bytes"</span><span class="x">
       </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">headers</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/json"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/json"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Authorization"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"Bearer {access-token}"</span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span><span class="x"> </span><span class="s">"https://mapi.fbot.me/v1/event/account-sign-up"</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">headers</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></code></pre>
<p><code>POST /v1/event/account-sign-up</code></p>

<p><em>Generate sign-up event.</em></p>

<p>Generate sign-up event.</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"couponCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"additionalProperties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"property1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"property2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"ipAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"userAgent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="postsignupevent-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td><a href="#schemasignupeventrequest">signUpEventRequest</a></td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» email</td>
<td>body</td>
<td>string(email)</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» customerId</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» firstName</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» lastName</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» refCode</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» couponCode</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» additionalProperties</td>
<td>body</td>
<td>object</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>»» <strong>additionalProperties</strong></td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» ipAddress</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» userAgent</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>201 Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"createdOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="postsignupevent-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>201</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.2">Created</a></td>
<td>Post event created</td>
<td><a href="#schemasignupeventresponse">signUpEventResponse</a></td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>Invalid input, object invalid</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>422</td>
<td><a href="https://tools.ietf.org/html/rfc2518#section-10.3">Unprocessable Entity</a></td>
<td>Unprocessable Entity</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>429</td>
<td><a href="https://tools.ietf.org/html/rfc6585#section-4">Too Many Requests</a></td>
<td>Too many requests</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>500</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.6.1">Internal Server Error</a></td>
<td>Internal Server Error (uncontrolled failure)</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
bearerAuth
</aside>
<h2 id='postcustomevent'>postCustomEvent</h2>
<p><a id="opIdpostCustomEvent"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># You can also use wget</span>
curl -X POST https://mapi.fbot.me/v1/event/custom <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Bearer {access-token}'</span>

</code></pre><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">https://mapi.fbot.me/v1/event/custom</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">mapi.fbot.me</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>

</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">inputBody</span> <span class="o">=</span> <span class="s1">'{
  "email": "user@example.com",
  "eventType": "string",
  "isNewCustomer": false,
  "firstName": "string",
  "lastName": "string",
  "refCode": "string",
  "couponCode": "string",
  "additionalProperties": {
    "property1": "string",
    "property2": "string"
  },
  "ipAddress": "string",
  "userAgent": "api"
}'</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span><span class="p">:</span><span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Accept'</span><span class="p">:</span><span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span><span class="p">:</span><span class="s1">'Bearer {access-token}'</span>
<span class="p">};</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://mapi.fbot.me/v1/event/custom'</span><span class="p">,</span>
<span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">inputBody</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">'Bearer {access-token}'</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span> <span class="s1">'https://mapi.fbot.me/v1/event/custom'</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span>
  <span class="p">},</span> <span class="ss">headers: </span><span class="n">headers</span>

<span class="nb">p</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
  <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer {access-token}'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://mapi.fbot.me/v1/event/custom'</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="s1">'vendor/autoload.php'</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
    <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
    <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">'Bearer {access-token}'</span><span class="p">,</span>
<span class="p">);</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\GuzzleHttp\Client</span><span class="p">();</span>

<span class="c1">// Define array of request body.
</span><span class="nv">$request_body</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">'POST'</span><span class="p">,</span><span class="s1">'https://mapi.fbot.me/v1/event/custom'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'headers'</span> <span class="o">=&gt;</span> <span class="nv">$headers</span><span class="p">,</span>
        <span class="s1">'json'</span> <span class="o">=&gt;</span> <span class="nv">$request_body</span><span class="p">,</span>
       <span class="p">)</span>
    <span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getContents</span><span class="p">());</span>
 <span class="p">}</span>
 <span class="k">catch</span> <span class="p">(</span><span class="nx">\GuzzleHttp\Exception\BadResponseException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle exception or api errors.
</span>    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">());</span>
 <span class="p">}</span>

 <span class="c1">// ...
</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://mapi.fbot.me/v1/event/custom"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
    <span class="k">new</span> <span class="nf">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
<span class="n">String</span> <span class="n">inputLine</span><span class="o">;</span>
<span class="n">StringBuffer</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

</code></pre><pre class="highlight go tab-go"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
       </span><span class="s">"bytes"</span><span class="x">
       </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">headers</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/json"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/json"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Authorization"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"Bearer {access-token}"</span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span><span class="x"> </span><span class="s">"https://mapi.fbot.me/v1/event/custom"</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">headers</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></code></pre>
<p><code>POST /v1/event/custom</code></p>

<p><em>Generate a custom event where the structure of the general structure of the request body object is defined by the client.</em></p>

<p>Generate event</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"isNewCustomer"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"couponCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"additionalProperties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"property1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"property2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"ipAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"userAgent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="postcustomevent-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td><a href="#schemacustomeventrequest">customEventRequest</a></td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» email</td>
<td>body</td>
<td>string(email)</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» eventType</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» isNewCustomer</td>
<td>body</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» firstName</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» lastName</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» refCode</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» couponCode</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» additionalProperties</td>
<td>body</td>
<td>object</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>»» <strong>additionalProperties</strong></td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» ipAddress</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» userAgent</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>201 Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"createdOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="postcustomevent-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>201</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.2">Created</a></td>
<td>Post event created</td>
<td><a href="#schemacustomeventresponse">customEventResponse</a></td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>Invalid input, object invalid</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>422</td>
<td><a href="https://tools.ietf.org/html/rfc2518#section-10.3">Unprocessable Entity</a></td>
<td>Unprocessable Entity</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>429</td>
<td><a href="https://tools.ietf.org/html/rfc6585#section-4">Too Many Requests</a></td>
<td>Too many requests</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>500</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.6.1">Internal Server Error</a></td>
<td>Internal Server Error (uncontrolled failure)</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
bearerAuth
</aside>
<h2 id='postcustomer'>postCustomer</h2>
<p><a id="opIdpostCustomer"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># You can also use wget</span>
curl -X POST https://mapi.fbot.me/v1/customer <span class="se">\</span>
  -H <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Bearer {access-token}'</span>

</code></pre><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">https://mapi.fbot.me/v1/customer</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">mapi.fbot.me</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>

</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">inputBody</span> <span class="o">=</span> <span class="s1">'{
  "email": "user@example.com",
  "customerId": "string",
  "isNewCustomer": false,
  "firstName": "string",
  "lastName": "string",
  "age": 0,
  "gender": "string",
  "zipCode": "string",
  "state": "string",
  "city": "string",
  "category": "string",
  "country": "string",
  "language": "string",
  "additionalProperties": {
    "property1": "string",
    "property2": "string"
  },
  "ipAddress": "string",
  "userAgent": "api"
}'</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span><span class="p">:</span><span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Accept'</span><span class="p">:</span><span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span><span class="p">:</span><span class="s1">'Bearer {access-token}'</span>
<span class="p">};</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s1">'https://mapi.fbot.me/v1/customer'</span><span class="p">,</span>
<span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="nx">inputBody</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
<span class="p">});</span>

</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">'Bearer {access-token}'</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">post</span> <span class="s1">'https://mapi.fbot.me/v1/customer'</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span>
  <span class="p">},</span> <span class="ss">headers: </span><span class="n">headers</span>

<span class="nb">p</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Content-Type'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
  <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer {access-token}'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s">'https://mapi.fbot.me/v1/customer'</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="s1">'vendor/autoload.php'</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
    <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
    <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">'Bearer {access-token}'</span><span class="p">,</span>
<span class="p">);</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\GuzzleHttp\Client</span><span class="p">();</span>

<span class="c1">// Define array of request body.
</span><span class="nv">$request_body</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">'POST'</span><span class="p">,</span><span class="s1">'https://mapi.fbot.me/v1/customer'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'headers'</span> <span class="o">=&gt;</span> <span class="nv">$headers</span><span class="p">,</span>
        <span class="s1">'json'</span> <span class="o">=&gt;</span> <span class="nv">$request_body</span><span class="p">,</span>
       <span class="p">)</span>
    <span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getContents</span><span class="p">());</span>
 <span class="p">}</span>
 <span class="k">catch</span> <span class="p">(</span><span class="nx">\GuzzleHttp\Exception\BadResponseException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle exception or api errors.
</span>    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">());</span>
 <span class="p">}</span>

 <span class="c1">// ...
</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://mapi.fbot.me/v1/customer"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"POST"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
    <span class="k">new</span> <span class="nf">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
<span class="n">String</span> <span class="n">inputLine</span><span class="o">;</span>
<span class="n">StringBuffer</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

</code></pre><pre class="highlight go tab-go"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
       </span><span class="s">"bytes"</span><span class="x">
       </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">headers</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span><span class="x">
        </span><span class="s">"Content-Type"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/json"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/json"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Authorization"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"Bearer {access-token}"</span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span><span class="x"> </span><span class="s">"https://mapi.fbot.me/v1/customer"</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">headers</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></code></pre>
<p><code>POST /v1/customer</code></p>

<p><em>Add a new customer to our records.</em></p>

<p>Generate event</p>

<blockquote>
<p>Body parameter</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"isNewCustomer"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"age"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"zipCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"additionalProperties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"property1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"property2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"ipAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"userAgent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="postcustomer-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>body</td>
<td>body</td>
<td><a href="#schemacustomerrequest">customerRequest</a></td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» email</td>
<td>body</td>
<td>string(email)</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» customerId</td>
<td>body</td>
<td>string</td>
<td>true</td>
<td>none</td>
</tr>
<tr>
<td>» isNewCustomer</td>
<td>body</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» firstName</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» lastName</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» age</td>
<td>body</td>
<td>integer</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» gender</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» zipCode</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» state</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» city</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» category</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» country</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» language</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» additionalProperties</td>
<td>body</td>
<td>object</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>»» <strong>additionalProperties</strong></td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» ipAddress</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>» userAgent</td>
<td>body</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"customerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"createdOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="postcustomer-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Customer already exists - updated</td>
<td><a href="#schemacustomerresponse">customerResponse</a></td>
</tr>
<tr>
<td>201</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.2">Created</a></td>
<td>Customer created</td>
<td><a href="#schemacustomerresponse">customerResponse</a></td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>Invalid input, object invalid</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>422</td>
<td><a href="https://tools.ietf.org/html/rfc2518#section-10.3">Unprocessable Entity</a></td>
<td>Unprocessable Entity</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>429</td>
<td><a href="https://tools.ietf.org/html/rfc6585#section-4">Too Many Requests</a></td>
<td>Too many requests</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>500</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.6.1">Internal Server Error</a></td>
<td>Internal Server Error (uncontrolled failure)</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
bearerAuth
</aside>
<h2 id='getuserdata'>getUserData</h2>
<p><a id="opIdgetUserData"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># You can also use wget</span>
curl -X GET https://mapi.fbot.me/v1/user-data <span class="se">\</span>
  -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Bearer {access-token}'</span>

</code></pre><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">https://mapi.fbot.me/v1/user-data</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">mapi.fbot.me</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>

</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">Accept</span><span class="p">:</span> <span class="s2">"application/json"</span><span class="p">,</span>
  <span class="na">Authorization</span><span class="p">:</span> <span class="s2">"Bearer {access-token}"</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s2">"https://mapi.fbot.me/v1/user-data"</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="s2">"GET"</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span><span class="p">,</span>
<span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">'Bearer {access-token}'</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">get</span> <span class="s1">'https://mapi.fbot.me/v1/user-data'</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span>
  <span class="p">},</span> <span class="ss">headers: </span><span class="n">headers</span>

<span class="nb">p</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
  <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer {access-token}'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">'https://mapi.fbot.me/v1/user-data'</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="s1">'vendor/autoload.php'</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
    <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">'Bearer {access-token}'</span><span class="p">,</span>
<span class="p">);</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\GuzzleHttp\Client</span><span class="p">();</span>

<span class="c1">// Define array of request body.
</span><span class="nv">$request_body</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">'GET'</span><span class="p">,</span><span class="s1">'https://mapi.fbot.me/v1/user-data'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'headers'</span> <span class="o">=&gt;</span> <span class="nv">$headers</span><span class="p">,</span>
        <span class="s1">'json'</span> <span class="o">=&gt;</span> <span class="nv">$request_body</span><span class="p">,</span>
       <span class="p">)</span>
    <span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getContents</span><span class="p">());</span>
 <span class="p">}</span>
 <span class="k">catch</span> <span class="p">(</span><span class="nx">\GuzzleHttp\Exception\BadResponseException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle exception or api errors.
</span>    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">());</span>
 <span class="p">}</span>

 <span class="c1">// ...
</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://mapi.fbot.me/v1/user-data"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"GET"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
    <span class="k">new</span> <span class="nf">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
<span class="n">String</span> <span class="n">inputLine</span><span class="o">;</span>
<span class="n">StringBuffer</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

</code></pre><pre class="highlight go tab-go"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
       </span><span class="s">"bytes"</span><span class="x">
       </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">headers</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/json"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Authorization"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"Bearer {access-token}"</span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"GET"</span><span class="p">,</span><span class="x"> </span><span class="s">"https://mapi.fbot.me/v1/user-data"</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">headers</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></code></pre>
<p><code>GET /v1/user-data</code></p>

<h3 id="getuserdata-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>query</td>
<td>string(email)</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>customerId</td>
<td>query</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"emails"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user@example.com"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"names"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"string"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"customerIds"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"string"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"ipAddresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"string"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"languages"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"string"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"userAgents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"string"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"colorDepths"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w">
  </span><span class="s2">"platforms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"string"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"screenSizes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"string"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"trackedEvents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"shares"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"facebook"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"messenger"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sms"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"twitter"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"purl"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"conversions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"facebook"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"messenger"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sms"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"twitter"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"purl"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="getuserdata-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Successful user data get request.</td>
<td><a href="#schemauserdatagetresponse">userDataGetResponse</a></td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>Invalid input, object invalid</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>422</td>
<td><a href="https://tools.ietf.org/html/rfc2518#section-10.3">Unprocessable Entity</a></td>
<td>Unprocessable Entity</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>429</td>
<td><a href="https://tools.ietf.org/html/rfc6585#section-4">Too Many Requests</a></td>
<td>Too many requests</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>500</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.6.1">Internal Server Error</a></td>
<td>Internal Server Error (uncontrolled failure)</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
bearerAuth
</aside>
<h2 id='deleteuserdata'>deleteUserData</h2>
<p><a id="opIddeleteUserData"></a></p>

<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight shell tab-shell"><code><span class="c"># You can also use wget</span>
curl -X DELETE https://mapi.fbot.me/v1/user-data <span class="se">\</span>
  -H <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
  -H <span class="s1">'Authorization: Bearer {access-token}'</span>

</code></pre><pre class="highlight http tab-http"><code><span class="nf">DELETE</span> <span class="nn">https://mapi.fbot.me/v1/user-data</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">mapi.fbot.me</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/json</span>

</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">Accept</span><span class="p">:</span> <span class="s2">"application/json"</span><span class="p">,</span>
  <span class="na">Authorization</span><span class="p">:</span> <span class="s2">"Bearer {access-token}"</span><span class="p">,</span>
<span class="p">};</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s2">"https://mapi.fbot.me/v1/user-data"</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">method</span><span class="p">:</span> <span class="s2">"DELETE"</span><span class="p">,</span>

  <span class="na">headers</span><span class="p">:</span> <span class="nx">headers</span><span class="p">,</span>
<span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">();</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">body</span><span class="p">);</span>
  <span class="p">});</span>
</code></pre><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'rest-client'</span>
<span class="nb">require</span> <span class="s1">'json'</span>

<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
  <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">'Bearer {access-token}'</span>
<span class="p">}</span>

<span class="n">result</span> <span class="o">=</span> <span class="no">RestClient</span><span class="p">.</span><span class="nf">delete</span> <span class="s1">'https://mapi.fbot.me/v1/user-data'</span><span class="p">,</span>
  <span class="ss">params: </span><span class="p">{</span>
  <span class="p">},</span> <span class="ss">headers: </span><span class="n">headers</span>

<span class="nb">p</span> <span class="no">JSON</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s">'Accept'</span><span class="p">:</span> <span class="s">'application/json'</span><span class="p">,</span>
  <span class="s">'Authorization'</span><span class="p">:</span> <span class="s">'Bearer {access-token}'</span>
<span class="p">}</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s">'https://mapi.fbot.me/v1/user-data'</span><span class="p">,</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>

</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>

<span class="k">require</span> <span class="s1">'vendor/autoload.php'</span><span class="p">;</span>

<span class="nv">$headers</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'Accept'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span><span class="p">,</span>
    <span class="s1">'Authorization'</span> <span class="o">=&gt;</span> <span class="s1">'Bearer {access-token}'</span><span class="p">,</span>
<span class="p">);</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\GuzzleHttp\Client</span><span class="p">();</span>

<span class="c1">// Define array of request body.
</span><span class="nv">$request_body</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

<span class="k">try</span> <span class="p">{</span>
    <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$client</span><span class="o">-&gt;</span><span class="na">request</span><span class="p">(</span><span class="s1">'DELETE'</span><span class="p">,</span><span class="s1">'https://mapi.fbot.me/v1/user-data'</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'headers'</span> <span class="o">=&gt;</span> <span class="nv">$headers</span><span class="p">,</span>
        <span class="s1">'json'</span> <span class="o">=&gt;</span> <span class="nv">$request_body</span><span class="p">,</span>
       <span class="p">)</span>
    <span class="p">);</span>
    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">getBody</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">getContents</span><span class="p">());</span>
 <span class="p">}</span>
 <span class="k">catch</span> <span class="p">(</span><span class="nx">\GuzzleHttp\Exception\BadResponseException</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// handle exception or api errors.
</span>    <span class="nb">print_r</span><span class="p">(</span><span class="nv">$e</span><span class="o">-&gt;</span><span class="na">getMessage</span><span class="p">());</span>
 <span class="p">}</span>

 <span class="c1">// ...
</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">URL</span> <span class="n">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">"https://mapi.fbot.me/v1/user-data"</span><span class="o">);</span>
<span class="n">HttpURLConnection</span> <span class="n">con</span> <span class="o">=</span> <span class="o">(</span><span class="n">HttpURLConnection</span><span class="o">)</span> <span class="n">obj</span><span class="o">.</span><span class="na">openConnection</span><span class="o">();</span>
<span class="n">con</span><span class="o">.</span><span class="na">setRequestMethod</span><span class="o">(</span><span class="s">"DELETE"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">responseCode</span> <span class="o">=</span> <span class="n">con</span><span class="o">.</span><span class="na">getResponseCode</span><span class="o">();</span>
<span class="n">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span>
    <span class="k">new</span> <span class="nf">InputStreamReader</span><span class="o">(</span><span class="n">con</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
<span class="n">String</span> <span class="n">inputLine</span><span class="o">;</span>
<span class="n">StringBuffer</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
<span class="k">while</span> <span class="o">((</span><span class="n">inputLine</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">response</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">inputLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

</code></pre><pre class="highlight go tab-go"><code><span class="k">package</span><span class="x"> </span><span class="n">main</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
       </span><span class="s">"bytes"</span><span class="x">
       </span><span class="s">"net/http"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">main</span><span class="p">()</span><span class="x"> </span><span class="p">{</span><span class="x">

    </span><span class="n">headers</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">][]</span><span class="kt">string</span><span class="p">{</span><span class="x">
        </span><span class="s">"Accept"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"application/json"</span><span class="p">},</span><span class="x">
        </span><span class="s">"Authorization"</span><span class="o">:</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">"Bearer {access-token}"</span><span class="p">},</span><span class="x">
    </span><span class="p">}</span><span class="x">

    </span><span class="n">data</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">([]</span><span class="kt">byte</span><span class="p">{</span><span class="n">jsonReq</span><span class="p">})</span><span class="x">
    </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"DELETE"</span><span class="p">,</span><span class="x"> </span><span class="s">"https://mapi.fbot.me/v1/user-data"</span><span class="p">,</span><span class="x"> </span><span class="n">data</span><span class="p">)</span><span class="x">
    </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">headers</span><span class="x">

    </span><span class="n">client</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">
    </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">
    </span><span class="c">// ...</span><span class="x">
</span><span class="p">}</span><span class="x">

</span></code></pre>
<p><code>DELETE /v1/user-data</code></p>

<h3 id="deleteuserdata-parameters">Parameters</h3>

<table><thead>
<tr>
<th>Name</th>
<th>In</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>query</td>
<td>string(email)</td>
<td>false</td>
<td>none</td>
</tr>
<tr>
<td>customerId</td>
<td>query</td>
<td>string</td>
<td>false</td>
<td>none</td>
</tr>
</tbody></table>

<blockquote>
<p>Example responses</p>

<p>200 Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"jobId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="deleteuserdata-responses">Responses</h3>

<table><thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.3.1">OK</a></td>
<td>Successful user data delete request.</td>
<td><a href="#schemauserdatadeleteresponse">userDataDeleteResponse</a></td>
</tr>
<tr>
<td>400</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">Bad Request</a></td>
<td>Invalid input, object invalid</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>422</td>
<td><a href="https://tools.ietf.org/html/rfc2518#section-10.3">Unprocessable Entity</a></td>
<td>Unprocessable Entity</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>429</td>
<td><a href="https://tools.ietf.org/html/rfc6585#section-4">Too Many Requests</a></td>
<td>Too many requests</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
<tr>
<td>500</td>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.6.1">Internal Server Error</a></td>
<td>Internal Server Error (uncontrolled failure)</td>
<td><a href="#schemaerror">Error</a></td>
</tr>
</tbody></table>

<aside class="warning">
To perform this operation, you must be authenticated by means of one of the following methods:
bearerAuth
</aside>
<h1 id='schemas'>Schemas</h1>
<h2 id="tocS_authorizationRequest">authorizationRequest</h2>

<!-- backwards compatibility -->

<p><a id="schemaauthorizationrequest"></a>
<a id="schema_authorizationRequest"></a>
<a id="tocSauthorizationrequest"></a>
<a id="tocsauthorizationrequest"></a></p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiO..."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='properties'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>key</td>
<td>string(uuid)</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>secret</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<h2 id="tocS_authorizationResponse">authorizationResponse</h2>

<!-- backwards compatibility -->

<p><a id="schemaauthorizationresponse"></a>
<a id="schema_authorizationResponse"></a>
<a id="tocSauthorizationresponse"></a>
<a id="tocsauthorizationresponse"></a></p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"tokenType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"expires"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-05-07T22:57:03Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='properties-2'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tokenType</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>token</td>
<td>string(byte)</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>expires</td>
<td>string(date-time)</td>
<td>false</td>
<td>none</td>
<td>Expires 24 hours after registered.</td>
</tr>
</tbody></table>

<h2 id="tocS_personalReferralLinkRequest">personalReferralLinkRequest</h2>

<!-- backwards compatibility -->

<p><a id="schemapersonalreferrallinkrequest"></a>
<a id="schema_personalReferralLinkRequest"></a>
<a id="tocSpersonalreferrallinkrequest"></a>
<a id="tocspersonalreferrallinkrequest"></a></p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"campaignId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"destinationUrlQueryParams"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"vanity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"channel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"purl"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"short"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ipAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"userAgent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"widgetId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"eventUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"eventPage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='properties-3'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string(email)</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>campaignId</td>
<td>string(uuid)</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>customerId</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>firstName</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>lastName</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>destinationUrlQueryParams</td>
<td>object</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>vanity</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>Specifies the seed.</td>
</tr>
<tr>
<td>channel</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>short</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>ipAddress</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>userAgent</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>widgetId</td>
<td>string(uuid)</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>eventUrl</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>eventPage</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>
<h4 id='enumerated-values-2'>Enumerated Values</h4>
<table><thead>
<tr>
<th>Property</th>
<th>Value</th>
</tr>
</thead><tbody>
<tr>
<td>channel</td>
<td>email</td>
</tr>
<tr>
<td>channel</td>
<td>facebook</td>
</tr>
<tr>
<td>channel</td>
<td>generic</td>
</tr>
<tr>
<td>channel</td>
<td>instagram</td>
</tr>
<tr>
<td>channel</td>
<td>messenger</td>
</tr>
<tr>
<td>channel</td>
<td>sms</td>
</tr>
<tr>
<td>channel</td>
<td>snap</td>
</tr>
<tr>
<td>channel</td>
<td>twitter</td>
</tr>
<tr>
<td>channel</td>
<td>purl</td>
</tr>
</tbody></table>

<h2 id="tocS_personalReferralLinkResponse">personalReferralLinkResponse</h2>

<!-- backwards compatibility -->

<p><a id="schemapersonalreferrallinkresponse"></a>
<a id="schema_personalReferralLinkResponse"></a>
<a id="tocSpersonalreferrallinkresponse"></a>
<a id="tocspersonalreferrallinkresponse"></a></p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"link"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"createdOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='properties-4'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>link</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>createdOn</td>
<td>string(datetime)</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<h2 id="tocS_customerRequest">customerRequest</h2>

<!-- backwards compatibility -->

<p><a id="schemacustomerrequest"></a>
<a id="schema_customerRequest"></a>
<a id="tocScustomerrequest"></a>
<a id="tocscustomerrequest"></a></p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"isNewCustomer"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"age"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"gender"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"zipCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"additionalProperties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"property1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"property2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"ipAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"userAgent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='properties-5'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string(email)</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>customerId</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>isNewCustomer</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>firstName</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>lastName</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>age</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>gender</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>zipCode</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>category</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>country</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>additionalProperties</td>
<td>object</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>» <strong>additionalProperties</strong></td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>ipAddress</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>userAgent</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<h2 id="tocS_customerResponse">customerResponse</h2>

<!-- backwards compatibility -->

<p><a id="schemacustomerresponse"></a>
<a id="schema_customerResponse"></a>
<a id="tocScustomerresponse"></a>
<a id="tocscustomerresponse"></a></p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"customerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"createdOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='properties-6'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>customerId</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>createdOn</td>
<td>string(datetime)</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<h2 id="tocS_purchaseEventRequest">purchaseEventRequest</h2>

<!-- backwards compatibility -->

<p><a id="schemapurchaseeventrequest"></a>
<a id="schema_purchaseEventRequest"></a>
<a id="tocSpurchaseeventrequest"></a>
<a id="tocspurchaseeventrequest"></a></p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"orderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"isNewCustomer"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"couponCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"additionalProperties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"property1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"property2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"ipAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"userAgent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='properties-7'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>orderId</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>email</td>
<td>string(email)</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>customerId</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>firstName</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>lastName</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>amount</td>
<td>number</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>isNewCustomer</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>couponCode</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>refCode</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>products</td>
<td>[<a href="#schemapurchaseeventrequest_products">purchaseEventRequest_products</a>]</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>additionalProperties</td>
<td>object</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>» <strong>additionalProperties</strong></td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>ipAddress</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>userAgent</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<h2 id="tocS_purchaseEventResponse">purchaseEventResponse</h2>

<!-- backwards compatibility -->

<p><a id="schemapurchaseeventresponse"></a>
<a id="schema_purchaseEventResponse"></a>
<a id="tocSpurchaseeventresponse"></a>
<a id="tocspurchaseeventresponse"></a></p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"createdOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='properties-8'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>eventId</td>
<td>string(uuid)</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>createdOn</td>
<td>string(datetime)</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<h2 id="tocS_customEventRequest">customEventRequest</h2>

<!-- backwards compatibility -->

<p><a id="schemacustomeventrequest"></a>
<a id="schema_customEventRequest"></a>
<a id="tocScustomeventrequest"></a>
<a id="tocscustomeventrequest"></a></p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"eventType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"isNewCustomer"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"couponCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"additionalProperties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"property1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"property2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"ipAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"userAgent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='properties-9'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string(email)</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>eventType</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>isNewCustomer</td>
<td>boolean</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>firstName</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>lastName</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>refCode</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>couponCode</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>additionalProperties</td>
<td>object</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>» <strong>additionalProperties</strong></td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>ipAddress</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>userAgent</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<h2 id="tocS_customEventResponse">customEventResponse</h2>

<!-- backwards compatibility -->

<p><a id="schemacustomeventresponse"></a>
<a id="schema_customEventResponse"></a>
<a id="tocScustomeventresponse"></a>
<a id="tocscustomeventresponse"></a></p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"createdOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='properties-10'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>eventId</td>
<td>string(uuid)</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>createdOn</td>
<td>string(datetime)</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<h2 id="tocS_signUpEventRequest">signUpEventRequest</h2>

<!-- backwards compatibility -->

<p><a id="schemasignupeventrequest"></a>
<a id="schema_signUpEventRequest"></a>
<a id="tocSsignupeventrequest"></a>
<a id="tocssignupeventrequest"></a></p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"firstName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lastName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"couponCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"additionalProperties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"property1"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"property2"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"ipAddress"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"userAgent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='properties-11'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string(email)</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>customerId</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>firstName</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>lastName</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>refCode</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>couponCode</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>additionalProperties</td>
<td>object</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>» <strong>additionalProperties</strong></td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>ipAddress</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>userAgent</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<h2 id="tocS_signUpEventResponse">signUpEventResponse</h2>

<!-- backwards compatibility -->

<p><a id="schemasignupeventresponse"></a>
<a id="schema_signUpEventResponse"></a>
<a id="tocSsignupeventresponse"></a>
<a id="tocssignupeventresponse"></a></p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"eventId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"createdOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='properties-12'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>eventId</td>
<td>string(uuid)</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>createdOn</td>
<td>string(datetime)</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<h2 id="tocS_userDataDeleteResponse">userDataDeleteResponse</h2>

<!-- backwards compatibility -->

<p><a id="schemauserdatadeleteresponse"></a>
<a id="schema_userDataDeleteResponse"></a>
<a id="tocSuserdatadeleteresponse"></a>
<a id="tocsuserdatadeleteresponse"></a></p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"jobId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='properties-13'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>jobId</td>
<td>string(uuid)</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<h2 id="tocS_userDataGetResponse">userDataGetResponse</h2>

<!-- backwards compatibility -->

<p><a id="schemauserdatagetresponse"></a>
<a id="schema_userDataGetResponse"></a>
<a id="tocSuserdatagetresponse"></a>
<a id="tocsuserdatagetresponse"></a></p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"emails"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user@example.com"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"names"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"string"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"customerIds"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"string"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"ipAddresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"string"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"languages"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"string"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"userAgents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"string"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"colorDepths"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w">
  </span><span class="s2">"platforms"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"string"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"screenSizes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"string"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"trackedEvents"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"shares"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"facebook"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"messenger"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sms"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"twitter"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"purl"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"conversions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"facebook"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"messenger"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sms"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"twitter"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"purl"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='properties-14'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>emails</td>
<td>[string]</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>names</td>
<td>[string]</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>customerIds</td>
<td>[string]</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>ipAddresses</td>
<td>[string]</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>languages</td>
<td>[string]</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>userAgents</td>
<td>[string]</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>colorDepths</td>
<td>[number]</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>platforms</td>
<td>[string]</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>screenSizes</td>
<td>[string]</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>trackedEvents</td>
<td>[<a href="#schemauserdatagetresponse_trackedevents">userDataGetResponse_trackedEvents</a>]</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>shares</td>
<td><a href="#schemauserdatagetresponse_shares">userDataGetResponse_shares</a></td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>conversions</td>
<td><a href="#schemauserdatagetresponse_shares">userDataGetResponse_shares</a></td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<h2 id="tocS_Error">Error</h2>

<!-- backwards compatibility -->

<p><a id="schemaerror"></a>
<a id="schema_Error"></a>
<a id="tocSerror"></a>
<a id="tocserror"></a></p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"reference"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='properties-15'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>error</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>message</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>code</td>
<td>number</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>reference</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<h2 id="tocS_purchaseEventRequest_products">purchaseEventRequest_products</h2>

<!-- backwards compatibility -->

<p><a id="schemapurchaseeventrequest_products"></a>
<a id="schema_purchaseEventRequest_products"></a>
<a id="tocSpurchaseeventrequest_products"></a>
<a id="tocspurchaseeventrequest_products"></a></p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='properties-16'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>sku</td>
<td>string</td>
<td>true</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>quantity</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>price</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<h2 id="tocS_userDataGetResponse_trackedEvents">userDataGetResponse_trackedEvents</h2>

<!-- backwards compatibility -->

<p><a id="schemauserdatagetresponse_trackedevents"></a>
<a id="schema_userDataGetResponse_trackedEvents"></a>
<a id="tocSuserdatagetresponse_trackedevents"></a>
<a id="tocsuserdatagetresponse_trackedevents"></a></p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='properties-17'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>url</td>
<td>string</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

<h2 id="tocS_userDataGetResponse_shares">userDataGetResponse_shares</h2>

<!-- backwards compatibility -->

<p><a id="schemauserdatagetresponse_shares"></a>
<a id="schema_userDataGetResponse_shares"></a>
<a id="tocSuserdatagetresponse_shares"></a>
<a id="tocsuserdatagetresponse_shares"></a></p>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"facebook"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"messenger"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"sms"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"twitter"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"purl"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='properties-18'>Properties</h3>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Restrictions</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>facebook</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>messenger</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>sms</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>twitter</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
<tr>
<td>purl</td>
<td>integer</td>
<td>false</td>
<td>none</td>
<td>none</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">Shell</a>
                <a href="#" data-language-name="http">HTTP</a>
                <a href="#" data-language-name="javascript">JavaScript</a>
                <a href="#" data-language-name="ruby">Ruby</a>
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="php">PHP</a>
                <a href="#" data-language-name="java">Java</a>
                <a href="#" data-language-name="go">Go</a>
          </div>
      </div>
    </div>
  </body>
</html>
